(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.KuromojiAnalyzer = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (process,global,setImmediate){(function (){
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.async=n.async||{})}(this,function(n){"use strict";function t(n,t){t|=0;for(var r=Math.max(n.length-t,0),e=Array(r),u=0;u<r;u++)e[u]=n[t+u];return e}var r=function(n){var r=t(arguments,1);return function(){var e=t(arguments);return n.apply(null,r.concat(e))}},e=function(n){return function(){var r=t(arguments),e=r.pop();n.call(this,r,e)}};function u(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}var i="function"==typeof setImmediate&&setImmediate,o="object"==typeof process&&"function"==typeof process.nextTick;function c(n){setTimeout(n,0)}function a(n){return function(r){var e=t(arguments,1);n(function(){r.apply(null,e)})}}var f=a(i?setImmediate:o?process.nextTick:c);function l(n){return e(function(t,r){var e;try{e=n.apply(this,t)}catch(n){return r(n)}u(e)&&"function"==typeof e.then?e.then(function(n){s(r,null,n)},function(n){s(r,n.message?n:new Error(n))}):r(null,e)})}function s(n,t,r){try{n(t,r)}catch(n){f(p,n)}}function p(n){throw n}var v="function"==typeof Symbol;function h(n){return v&&"AsyncFunction"===n[Symbol.toStringTag]}function y(n){return h(n)?l(n):n}function d(n){return function(r){var u=t(arguments,1),i=e(function(t,e){var u=this;return n(r,function(n,r){y(n).apply(u,t.concat(r))},e)});return u.length?i.apply(this,u):i}}var m="object"==typeof global&&global&&global.Object===Object&&global,g="object"==typeof self&&self&&self.Object===Object&&self,b=m||g||Function("return this")(),j=b.Symbol,S=Object.prototype,k=S.hasOwnProperty,L=S.toString,O=j?j.toStringTag:void 0;var w=Object.prototype.toString;var x="[object Null]",E="[object Undefined]",A=j?j.toStringTag:void 0;function T(n){return null==n?void 0===n?E:x:A&&A in Object(n)?function(n){var t=k.call(n,O),r=n[O];try{n[O]=void 0;var e=!0}catch(n){}var u=L.call(n);return e&&(t?n[O]=r:delete n[O]),u}(n):function(n){return w.call(n)}(n)}var _="[object AsyncFunction]",B="[object Function]",F="[object GeneratorFunction]",I="[object Proxy]";var M=9007199254740991;function U(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=M}function q(n){return null!=n&&U(n.length)&&!function(n){if(!u(n))return!1;var t=T(n);return t==B||t==F||t==_||t==I}(n)}var z={};function P(){}function V(n){return function(){if(null!==n){var t=n;n=null,t.apply(this,arguments)}}}var D="function"==typeof Symbol&&Symbol.iterator,R=function(n){return D&&n[D]&&n[D]()};function C(n){return null!=n&&"object"==typeof n}var $="[object Arguments]";function W(n){return C(n)&&T(n)==$}var N=Object.prototype,Q=N.hasOwnProperty,G=N.propertyIsEnumerable,H=W(function(){return arguments}())?W:function(n){return C(n)&&Q.call(n,"callee")&&!G.call(n,"callee")},J=Array.isArray;var K="object"==typeof n&&n&&!n.nodeType&&n,X=K&&"object"==typeof module&&module&&!module.nodeType&&module,Y=X&&X.exports===K?b.Buffer:void 0,Z=(Y?Y.isBuffer:void 0)||function(){return!1},nn=9007199254740991,tn=/^(?:0|[1-9]\d*)$/;function rn(n,t){var r=typeof n;return!!(t=null==t?nn:t)&&("number"==r||"symbol"!=r&&tn.test(n))&&n>-1&&n%1==0&&n<t}var en={};en["[object Float32Array]"]=en["[object Float64Array]"]=en["[object Int8Array]"]=en["[object Int16Array]"]=en["[object Int32Array]"]=en["[object Uint8Array]"]=en["[object Uint8ClampedArray]"]=en["[object Uint16Array]"]=en["[object Uint32Array]"]=!0,en["[object Arguments]"]=en["[object Array]"]=en["[object ArrayBuffer]"]=en["[object Boolean]"]=en["[object DataView]"]=en["[object Date]"]=en["[object Error]"]=en["[object Function]"]=en["[object Map]"]=en["[object Number]"]=en["[object Object]"]=en["[object RegExp]"]=en["[object Set]"]=en["[object String]"]=en["[object WeakMap]"]=!1;var un,on="object"==typeof n&&n&&!n.nodeType&&n,cn=on&&"object"==typeof module&&module&&!module.nodeType&&module,an=cn&&cn.exports===on&&m.process,fn=function(){try{var n=cn&&cn.require&&cn.require("util").types;return n||an&&an.binding&&an.binding("util")}catch(n){}}(),ln=fn&&fn.isTypedArray,sn=ln?(un=ln,function(n){return un(n)}):function(n){return C(n)&&U(n.length)&&!!en[T(n)]},pn=Object.prototype.hasOwnProperty;function vn(n,t){var r=J(n),e=!r&&H(n),u=!r&&!e&&Z(n),i=!r&&!e&&!u&&sn(n),o=r||e||u||i,c=o?function(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}(n.length,String):[],a=c.length;for(var f in n)!t&&!pn.call(n,f)||o&&("length"==f||u&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||rn(f,a))||c.push(f);return c}var hn=Object.prototype;var yn=function(n,t){return function(r){return n(t(r))}}(Object.keys,Object),dn=Object.prototype.hasOwnProperty;function mn(n){if(r=(t=n)&&t.constructor,t!==("function"==typeof r&&r.prototype||hn))return yn(n);var t,r,e=[];for(var u in Object(n))dn.call(n,u)&&"constructor"!=u&&e.push(u);return e}function gn(n){return q(n)?vn(n):mn(n)}function bn(n){if(q(n))return function(n){var t=-1,r=n.length;return function(){return++t<r?{value:n[t],key:t}:null}}(n);var t,r,e,u,i=R(n);return i?function(n){var t=-1;return function(){var r=n.next();return r.done?null:(t++,{value:r.value,key:t})}}(i):(r=gn(t=n),e=-1,u=r.length,function n(){var i=r[++e];return"__proto__"===i?n():e<u?{value:t[i],key:i}:null})}function jn(n){return function(){if(null===n)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}function Sn(n){return function(t,r,e){if(e=V(e||P),n<=0||!t)return e(null);var u=bn(t),i=!1,o=0,c=!1;function a(n,t){if(o-=1,n)i=!0,e(n);else{if(t===z||i&&o<=0)return i=!0,e(null);c||f()}}function f(){for(c=!0;o<n&&!i;){var t=u();if(null===t)return i=!0,void(o<=0&&e(null));o+=1,r(t.value,t.key,jn(a))}c=!1}f()}}function kn(n,t,r,e){Sn(t)(n,y(r),e)}function Ln(n,t){return function(r,e,u){return n(r,t,e,u)}}function On(n,t,r){r=V(r||P);var e=0,u=0,i=n.length;function o(n,t){n?r(n):++u!==i&&t!==z||r(null)}for(0===i&&r(null);e<i;e++)t(n[e],e,jn(o))}var wn=Ln(kn,1/0),xn=function(n,t,r){(q(n)?On:wn)(n,y(t),r)};function En(n){return function(t,r,e){return n(xn,t,y(r),e)}}function An(n,t,r,e){e=e||P,t=t||[];var u=[],i=0,o=y(r);n(t,function(n,t,r){var e=i++;o(n,function(n,t){u[e]=t,r(n)})},function(n){e(n,u)})}var Tn=En(An),_n=d(Tn);function Bn(n){return function(t,r,e,u){return n(Sn(r),t,y(e),u)}}var Fn=Bn(An),In=Ln(Fn,1),Mn=d(In);function Un(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}var qn,zn=function(n,t,r){for(var e=-1,u=Object(n),i=r(n),o=i.length;o--;){var c=i[qn?o:++e];if(!1===t(u[c],c,u))break}return n};function Pn(n,t){return n&&zn(n,t,gn)}function Vn(n){return n!=n}function Dn(n,t,r){return t==t?function(n,t,r){for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}(n,t,r):function(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}(n,Vn,r)}var Rn=function(n,r,e){"function"==typeof r&&(e=r,r=null),e=V(e||P);var u=gn(n).length;if(!u)return e(null);r||(r=u);var i={},o=0,c=!1,a=Object.create(null),f=[],l=[],s={};function p(n,r){f.push(function(){!function(n,r){if(c)return;var u=jn(function(r,u){if(o--,arguments.length>2&&(u=t(arguments,1)),r){var f={};Pn(i,function(n,t){f[t]=n}),f[n]=u,c=!0,a=Object.create(null),e(r,f)}else i[n]=u,Un(a[n]||[],function(n){n()}),v()});o++;var f=y(r[r.length-1]);r.length>1?f(i,u):f(u)}(n,r)})}function v(){if(0===f.length&&0===o)return e(null,i);for(;f.length&&o<r;){f.shift()()}}function h(t){var r=[];return Pn(n,function(n,e){J(n)&&Dn(n,t,0)>=0&&r.push(e)}),r}Pn(n,function(t,r){if(!J(t))return p(r,[t]),void l.push(r);var e=t.slice(0,t.length-1),u=e.length;if(0===u)return p(r,t),void l.push(r);s[r]=u,Un(e,function(i){if(!n[i])throw new Error("async.auto task `"+r+"` has a non-existent dependency `"+i+"` in "+e.join(", "));!function(n,t){var r=a[n];r||(r=a[n]=[]);r.push(t)}(i,function(){0===--u&&p(r,t)})})}),function(){var n,t=0;for(;l.length;)n=l.pop(),t++,Un(h(n),function(n){0==--s[n]&&l.push(n)});if(t!==u)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),v()};function Cn(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}var $n="[object Symbol]";var Wn=1/0,Nn=j?j.prototype:void 0,Qn=Nn?Nn.toString:void 0;function Gn(n){if("string"==typeof n)return n;if(J(n))return Cn(n,Gn)+"";if(function(n){return"symbol"==typeof n||C(n)&&T(n)==$n}(n))return Qn?Qn.call(n):"";var t=n+"";return"0"==t&&1/n==-Wn?"-0":t}function Hn(n,t,r){var e=n.length;return r=void 0===r?e:r,!t&&r>=e?n:function(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),(r=r>u?u:r)<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(u);++e<u;)i[e]=n[e+t];return i}(n,t,r)}var Jn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Kn="[\\ud800-\\udfff]",Xn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Yn="\\ud83c[\\udffb-\\udfff]",Zn="[^\\ud800-\\udfff]",nt="(?:\\ud83c[\\udde6-\\uddff]){2}",tt="[\\ud800-\\udbff][\\udc00-\\udfff]",rt="(?:"+Xn+"|"+Yn+")"+"?",et="[\\ufe0e\\ufe0f]?"+rt+("(?:\\u200d(?:"+[Zn,nt,tt].join("|")+")[\\ufe0e\\ufe0f]?"+rt+")*"),ut="(?:"+[Zn+Xn+"?",Xn,nt,tt,Kn].join("|")+")",it=RegExp(Yn+"(?="+Yn+")|"+ut+et,"g");function ot(n){return function(n){return Jn.test(n)}(n)?function(n){return n.match(it)||[]}(n):function(n){return n.split("")}(n)}var ct=/^\s+|\s+$/g;function at(n,t,r){var e;if((n=null==(e=n)?"":Gn(e))&&(r||void 0===t))return n.replace(ct,"");if(!n||!(t=Gn(t)))return n;var u=ot(n),i=ot(t);return Hn(u,function(n,t){for(var r=-1,e=n.length;++r<e&&Dn(t,n[r],0)>-1;);return r}(u,i),function(n,t){for(var r=n.length;r--&&Dn(t,n[r],0)>-1;);return r}(u,i)+1).join("")}var ft=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,lt=/,/,st=/(=.+)?(\s*)$/,pt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function vt(n,t){var r={};Pn(n,function(n,t){var e,u,i=h(n),o=!i&&1===n.length||i&&0===n.length;if(J(n))e=n.slice(0,-1),n=n[n.length-1],r[t]=e.concat(e.length>0?c:n);else if(o)r[t]=n;else{if(e=u=(u=(u=(u=(u=n).toString().replace(pt,"")).match(ft)[2].replace(" ",""))?u.split(lt):[]).map(function(n){return at(n.replace(st,""))}),0===n.length&&!i&&0===e.length)throw new Error("autoInject task functions require explicit parameters.");i||e.pop(),r[t]=e.concat(c)}function c(t,r){var u=Cn(e,function(n){return t[n]});u.push(r),y(n).apply(null,u)}}),Rn(r,t)}function ht(){this.head=this.tail=null,this.length=0}function yt(n,t){n.length=1,n.head=n.tail=t}function dt(n,t,r){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var e=y(n),u=0,i=[],o=!1;function c(n,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(s.started=!0,J(n)||(n=[n]),0===n.length&&s.idle())return f(function(){s.drain()});for(var e=0,u=n.length;e<u;e++){var i={data:n[e],callback:r||P};t?s._tasks.unshift(i):s._tasks.push(i)}o||(o=!0,f(function(){o=!1,s.process()}))}function a(n){return function(t){u-=1;for(var r=0,e=n.length;r<e;r++){var o=n[r],c=Dn(i,o,0);0===c?i.shift():c>0&&i.splice(c,1),o.callback.apply(o,arguments),null!=t&&s.error(t,o.data)}u<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}var l=!1,s={_tasks:new ht,concurrency:t,payload:r,saturated:P,unsaturated:P,buffer:t/4,empty:P,drain:P,error:P,started:!1,paused:!1,push:function(n,t){c(n,!1,t)},kill:function(){s.drain=P,s._tasks.empty()},unshift:function(n,t){c(n,!0,t)},remove:function(n){s._tasks.remove(n)},process:function(){if(!l){for(l=!0;!s.paused&&u<s.concurrency&&s._tasks.length;){var n=[],t=[],r=s._tasks.length;s.payload&&(r=Math.min(r,s.payload));for(var o=0;o<r;o++){var c=s._tasks.shift();n.push(c),i.push(c),t.push(c.data)}u+=1,0===s._tasks.length&&s.empty(),u===s.concurrency&&s.saturated();var f=jn(a(n));e(t,f)}l=!1}},length:function(){return s._tasks.length},running:function(){return u},workersList:function(){return i},idle:function(){return s._tasks.length+u===0},pause:function(){s.paused=!0},resume:function(){!1!==s.paused&&(s.paused=!1,f(s.process))}};return s}function mt(n,t){return dt(n,1,t)}ht.prototype.removeLink=function(n){return n.prev?n.prev.next=n.next:this.head=n.next,n.next?n.next.prev=n.prev:this.tail=n.prev,n.prev=n.next=null,this.length-=1,n},ht.prototype.empty=function(){for(;this.head;)this.shift();return this},ht.prototype.insertAfter=function(n,t){t.prev=n,t.next=n.next,n.next?n.next.prev=t:this.tail=t,n.next=t,this.length+=1},ht.prototype.insertBefore=function(n,t){t.prev=n.prev,t.next=n,n.prev?n.prev.next=t:this.head=t,n.prev=t,this.length+=1},ht.prototype.unshift=function(n){this.head?this.insertBefore(this.head,n):yt(this,n)},ht.prototype.push=function(n){this.tail?this.insertAfter(this.tail,n):yt(this,n)},ht.prototype.shift=function(){return this.head&&this.removeLink(this.head)},ht.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},ht.prototype.toArray=function(){for(var n=Array(this.length),t=this.head,r=0;r<this.length;r++)n[r]=t.data,t=t.next;return n},ht.prototype.remove=function(n){for(var t=this.head;t;){var r=t.next;n(t)&&this.removeLink(t),t=r}return this};var gt=Ln(kn,1);function bt(n,t,r,e){e=V(e||P);var u=y(r);gt(n,function(n,r,e){u(t,n,function(n,r){t=r,e(n)})},function(n){e(n,t)})}function jt(){var n=Cn(arguments,y);return function(){var r=t(arguments),e=this,u=r[r.length-1];"function"==typeof u?r.pop():u=P,bt(n,r,function(n,r,u){r.apply(e,n.concat(function(n){var r=t(arguments,1);u(n,r)}))},function(n,t){u.apply(e,[n].concat(t))})}}var St=function(){return jt.apply(null,t(arguments).reverse())},kt=Array.prototype.concat,Lt=function(n,r,e,u){u=u||P;var i=y(e);Fn(n,r,function(n,r){i(n,function(n){return n?r(n):r(null,t(arguments,1))})},function(n,t){for(var r=[],e=0;e<t.length;e++)t[e]&&(r=kt.apply(r,t[e]));return u(n,r)})},Ot=Ln(Lt,1/0),wt=Ln(Lt,1),xt=function(){var n=t(arguments),r=[null].concat(n);return function(){return arguments[arguments.length-1].apply(this,r)}};function Et(n){return n}function At(n,t){return function(r,e,u,i){i=i||P;var o,c=!1;r(e,function(r,e,i){u(r,function(e,u){e?i(e):n(u)&&!o?(c=!0,o=t(!0,r),i(null,z)):i()})},function(n){n?i(n):i(null,c?o:t(!1))})}}function Tt(n,t){return t}var _t=En(At(Et,Tt)),Bt=Bn(At(Et,Tt)),Ft=Ln(Bt,1);function It(n){return function(r){var e=t(arguments,1);e.push(function(r){var e=t(arguments,1);"object"==typeof console&&(r?console.error&&console.error(r):console[n]&&Un(e,function(t){console[n](t)}))}),y(r).apply(null,e)}}var Mt=It("dir");function Ut(n,r,e){e=jn(e||P);var u=y(n),i=y(r);function o(n){if(n)return e(n);var r=t(arguments,1);r.push(c),i.apply(this,r)}function c(n,t){return n?e(n):t?void u(o):e(null)}c(null,!0)}function qt(n,r,e){e=jn(e||P);var u=y(n),i=function(n){if(n)return e(n);var o=t(arguments,1);if(r.apply(this,o))return u(i);e.apply(null,[null].concat(o))};u(i)}function zt(n,t,r){qt(n,function(){return!t.apply(this,arguments)},r)}function Pt(n,t,r){r=jn(r||P);var e=y(t),u=y(n);function i(n){if(n)return r(n);u(o)}function o(n,t){return n?r(n):t?void e(i):r(null)}u(o)}function Vt(n){return function(t,r,e){return n(t,e)}}function Dt(n,t,r){xn(n,Vt(y(t)),r)}function Rt(n,t,r,e){Sn(t)(n,Vt(y(r)),e)}var Ct=Ln(Rt,1);function $t(n){return h(n)?n:e(function(t,r){var e=!0;t.push(function(){var n=arguments;e?f(function(){r.apply(null,n)}):r.apply(null,n)}),n.apply(this,t),e=!1})}function Wt(n){return!n}var Nt=En(At(Wt,Wt)),Qt=Bn(At(Wt,Wt)),Gt=Ln(Qt,1);function Ht(n){return function(t){return null==t?void 0:t[n]}}function Jt(n,t,r,e){var u=new Array(t.length);n(t,function(n,t,e){r(n,function(n,r){u[t]=!!r,e(n)})},function(n){if(n)return e(n);for(var r=[],i=0;i<t.length;i++)u[i]&&r.push(t[i]);e(null,r)})}function Kt(n,t,r,e){var u=[];n(t,function(n,t,e){r(n,function(r,i){r?e(r):(i&&u.push({index:t,value:n}),e())})},function(n){n?e(n):e(null,Cn(u.sort(function(n,t){return n.index-t.index}),Ht("value")))})}function Xt(n,t,r,e){(q(t)?Jt:Kt)(n,t,y(r),e||P)}var Yt=En(Xt),Zt=Bn(Xt),nr=Ln(Zt,1);function tr(n,t){var r=jn(t||P),e=y($t(n));!function n(t){if(t)return r(t);e(n)}()}var rr=function(n,t,r,e){e=e||P;var u=y(r);Fn(n,t,function(n,t){u(n,function(r,e){return r?t(r):t(null,{key:e,val:n})})},function(n,t){for(var r={},u=Object.prototype.hasOwnProperty,i=0;i<t.length;i++)if(t[i]){var o=t[i].key,c=t[i].val;u.call(r,o)?r[o].push(c):r[o]=[c]}return e(n,r)})},er=Ln(rr,1/0),ur=Ln(rr,1),ir=It("log");function or(n,t,r,e){e=V(e||P);var u={},i=y(r);kn(n,t,function(n,t,r){i(n,t,function(n,e){if(n)return r(n);u[t]=e,r()})},function(n){e(n,u)})}var cr=Ln(or,1/0),ar=Ln(or,1);function fr(n,t){return t in n}function lr(n,r){var u=Object.create(null),i=Object.create(null);r=r||Et;var o=y(n),c=e(function(n,e){var c=r.apply(null,n);fr(u,c)?f(function(){e.apply(null,u[c])}):fr(i,c)?i[c].push(e):(i[c]=[e],o.apply(null,n.concat(function(){var n=t(arguments);u[c]=n;var r=i[c];delete i[c];for(var e=0,o=r.length;e<o;e++)r[e].apply(null,n)})))});return c.memo=u,c.unmemoized=n,c}var sr=a(o?process.nextTick:i?setImmediate:c);function pr(n,r,e){e=e||P;var u=q(r)?[]:{};n(r,function(n,r,e){y(n)(function(n,i){arguments.length>2&&(i=t(arguments,1)),u[r]=i,e(n)})},function(n){e(n,u)})}function vr(n,t){pr(xn,n,t)}function hr(n,t,r){pr(Sn(t),n,r)}var yr=function(n,t){var r=y(n);return dt(function(n,t){r(n[0],t)},t,1)},dr=function(n,t){var r=yr(n,t);return r.push=function(n,t,e){if(null==e&&(e=P),"function"!=typeof e)throw new Error("task callback must be a function");if(r.started=!0,J(n)||(n=[n]),0===n.length)return f(function(){r.drain()});t=t||0;for(var u=r._tasks.head;u&&t>=u.priority;)u=u.next;for(var i=0,o=n.length;i<o;i++){var c={data:n[i],priority:t,callback:e};u?r._tasks.insertBefore(u,c):r._tasks.push(c)}f(r.process)},delete r.unshift,r};function mr(n,t){if(t=V(t||P),!J(n))return t(new TypeError("First argument to race must be an array of functions"));if(!n.length)return t();for(var r=0,e=n.length;r<e;r++)y(n[r])(t)}function gr(n,r,e,u){bt(t(n).reverse(),r,e,u)}function br(n){var r=y(n);return e(function(n,e){return n.push(function(n,r){var u;n?e(null,{error:n}):(u=arguments.length<=2?r:t(arguments,1),e(null,{value:u}))}),r.apply(this,n)})}function jr(n){var t;return J(n)?t=Cn(n,br):(t={},Pn(n,function(n,r){t[r]=br.call(this,n)})),t}function Sr(n,t,r,e){Xt(n,t,function(n,t){r(n,function(n,r){t(n,!r)})},e)}var kr=En(Sr),Lr=Bn(Sr),Or=Ln(Lr,1);function wr(n){return function(){return n}}function xr(n,t,r){var e=5,u=0,i={times:e,intervalFunc:wr(u)};if(arguments.length<3&&"function"==typeof n?(r=t||P,t=n):(!function(n,t){if("object"==typeof t)n.times=+t.times||e,n.intervalFunc="function"==typeof t.interval?t.interval:wr(+t.interval||u),n.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");n.times=+t||e}}(i,n),r=r||P),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var o=y(t),c=1;!function n(){o(function(t){t&&c++<i.times&&("function"!=typeof i.errorFilter||i.errorFilter(t))?setTimeout(n,i.intervalFunc(c)):r.apply(null,arguments)})}()}var Er=function(n,t){t||(t=n,n=null);var r=y(t);return e(function(t,e){function u(n){r.apply(null,t.concat(n))}n?xr(n,u,e):xr(u,e)})};function Ar(n,t){pr(gt,n,t)}var Tr=En(At(Boolean,Et)),_r=Bn(At(Boolean,Et)),Br=Ln(_r,1);function Fr(n,t,r){var e=y(t);function u(n,t){var r=n.criteria,e=t.criteria;return r<e?-1:r>e?1:0}Tn(n,function(n,t){e(n,function(r,e){if(r)return t(r);t(null,{value:n,criteria:e})})},function(n,t){if(n)return r(n);r(null,Cn(t.sort(u),Ht("value")))})}function Ir(n,t,r){var u=y(n);return e(function(e,i){var o,c=!1;e.push(function(){c||(i.apply(null,arguments),clearTimeout(o))}),o=setTimeout(function(){var t=n.name||"anonymous",e=new Error('Callback function "'+t+'" timed out.');e.code="ETIMEDOUT",r&&(e.info=r),c=!0,i(e)},t),u.apply(null,e)})}var Mr=Math.ceil,Ur=Math.max;function qr(n,t,r,e){var u=y(r);Fn(function(n,t,r,e){for(var u=-1,i=Ur(Mr((t-n)/(r||1)),0),o=Array(i);i--;)o[e?i:++u]=n,n+=r;return o}(0,n,1),t,u,e)}var zr=Ln(qr,1/0),Pr=Ln(qr,1);function Vr(n,t,r,e){arguments.length<=3&&(e=r,r=t,t=J(n)?[]:{}),e=V(e||P);var u=y(r);xn(n,function(n,r,e){u(t,n,r,e)},function(n){e(n,t)})}function Dr(n,r){var e,u=null;r=r||P,Ct(n,function(n,r){y(n)(function(n,i){e=arguments.length>2?t(arguments,1):i,u=n,r(!n)})},function(){r(u,e)})}function Rr(n){return function(){return(n.unmemoized||n).apply(null,arguments)}}function Cr(n,r,e){e=jn(e||P);var u=y(r);if(!n())return e(null);var i=function(r){if(r)return e(r);if(n())return u(i);var o=t(arguments,1);e.apply(null,[null].concat(o))};u(i)}function $r(n,t,r){Cr(function(){return!n.apply(this,arguments)},t,r)}var Wr=function(n,r){if(r=V(r||P),!J(n))return r(new Error("First argument to waterfall must be an array of functions"));if(!n.length)return r();var e=0;function u(t){var r=y(n[e++]);t.push(jn(i)),r.apply(null,t)}function i(i){if(i||e===n.length)return r.apply(null,arguments);u(t(arguments,1))}u([])},Nr={apply:r,applyEach:_n,applyEachSeries:Mn,asyncify:l,auto:Rn,autoInject:vt,cargo:mt,compose:St,concat:Ot,concatLimit:Lt,concatSeries:wt,constant:xt,detect:_t,detectLimit:Bt,detectSeries:Ft,dir:Mt,doDuring:Ut,doUntil:zt,doWhilst:qt,during:Pt,each:Dt,eachLimit:Rt,eachOf:xn,eachOfLimit:kn,eachOfSeries:gt,eachSeries:Ct,ensureAsync:$t,every:Nt,everyLimit:Qt,everySeries:Gt,filter:Yt,filterLimit:Zt,filterSeries:nr,forever:tr,groupBy:er,groupByLimit:rr,groupBySeries:ur,log:ir,map:Tn,mapLimit:Fn,mapSeries:In,mapValues:cr,mapValuesLimit:or,mapValuesSeries:ar,memoize:lr,nextTick:sr,parallel:vr,parallelLimit:hr,priorityQueue:dr,queue:yr,race:mr,reduce:bt,reduceRight:gr,reflect:br,reflectAll:jr,reject:kr,rejectLimit:Lr,rejectSeries:Or,retry:xr,retryable:Er,seq:jt,series:Ar,setImmediate:f,some:Tr,someLimit:_r,someSeries:Br,sortBy:Fr,timeout:Ir,times:zr,timesLimit:qr,timesSeries:Pr,transform:Vr,tryEach:Dr,unmemoize:Rr,until:$r,waterfall:Wr,whilst:Cr,all:Nt,allLimit:Qt,allSeries:Gt,any:Tr,anyLimit:_r,anySeries:Br,find:_t,findLimit:Bt,findSeries:Ft,forEach:Dt,forEachSeries:Ct,forEachLimit:Rt,forEachOf:xn,forEachOfSeries:gt,forEachOfLimit:kn,inject:bt,foldl:bt,foldr:gr,select:Yt,selectLimit:Zt,selectSeries:nr,wrapSync:l};n.default=Nr,n.apply=r,n.applyEach=_n,n.applyEachSeries=Mn,n.asyncify=l,n.auto=Rn,n.autoInject=vt,n.cargo=mt,n.compose=St,n.concat=Ot,n.concatLimit=Lt,n.concatSeries=wt,n.constant=xt,n.detect=_t,n.detectLimit=Bt,n.detectSeries=Ft,n.dir=Mt,n.doDuring=Ut,n.doUntil=zt,n.doWhilst=qt,n.during=Pt,n.each=Dt,n.eachLimit=Rt,n.eachOf=xn,n.eachOfLimit=kn,n.eachOfSeries=gt,n.eachSeries=Ct,n.ensureAsync=$t,n.every=Nt,n.everyLimit=Qt,n.everySeries=Gt,n.filter=Yt,n.filterLimit=Zt,n.filterSeries=nr,n.forever=tr,n.groupBy=er,n.groupByLimit=rr,n.groupBySeries=ur,n.log=ir,n.map=Tn,n.mapLimit=Fn,n.mapSeries=In,n.mapValues=cr,n.mapValuesLimit=or,n.mapValuesSeries=ar,n.memoize=lr,n.nextTick=sr,n.parallel=vr,n.parallelLimit=hr,n.priorityQueue=dr,n.queue=yr,n.race=mr,n.reduce=bt,n.reduceRight=gr,n.reflect=br,n.reflectAll=jr,n.reject=kr,n.rejectLimit=Lr,n.rejectSeries=Or,n.retry=xr,n.retryable=Er,n.seq=jt,n.series=Ar,n.setImmediate=f,n.some=Tr,n.someLimit=_r,n.someSeries=Br,n.sortBy=Fr,n.timeout=Ir,n.times=zr,n.timesLimit=qr,n.timesSeries=Pr,n.transform=Vr,n.tryEach=Dr,n.unmemoize=Rr,n.until=$r,n.waterfall=Wr,n.whilst=Cr,n.all=Nt,n.allLimit=Qt,n.allSeries=Gt,n.any=Tr,n.anyLimit=_r,n.anySeries=Br,n.find=_t,n.findLimit=Bt,n.findSeries=Ft,n.forEach=Dt,n.forEachSeries=Ct,n.forEachLimit=Rt,n.forEachOf=xn,n.forEachOfSeries=gt,n.forEachOfLimit=kn,n.inject=bt,n.foldl=bt,n.foldr=gr,n.select=Yt,n.selectLimit=Zt,n.selectSeries=nr,n.wrapSync=l,Object.defineProperty(n,"__esModule",{value:!0})});

}).call(this)}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("timers").setImmediate)
},{"_process":27,"timers":28}],2:[function(require,module,exports){
!function(){"use strict";var r=function(r){null==r&&(r=1024);var e=function(r,e,t){for(var n=e;n<t;n++)r[n]=1-n;if(0<u.array[u.array.length-1]){for(var a=u.array.length-2;0<u.array[a];)a--;r[e]=-a}},t=function(r,e,t){for(var n=e;n<t;n++)r[n]=-n-1},a=function(r){var a=2*r,i=n(s.signed,s.bytes,a);e(i,s.array.length,a),i.set(s.array),s.array=null,s.array=i;var o=n(u.signed,u.bytes,a);t(o,u.array.length,a),o.set(u.array),u.array=null,u.array=o},i=1,s={signed:!0,bytes:4,array:n(!0,4,r)},u={signed:!0,bytes:4,array:n(!0,4,r)};return s.array[0]=1,u.array[0]=0,e(s.array,1,s.array.length),t(u.array,1,u.array.length),{getBaseBuffer:function(){return s.array},getCheckBuffer:function(){return u.array},loadBaseBuffer:function(r){return s.array=r,this},loadCheckBuffer:function(r){return u.array=r,this},size:function(){return Math.max(s.array.length,u.array.length)},getBase:function(r){return s.array.length-1<r?1-r:s.array[r]},getCheck:function(r){return u.array.length-1<r?-r-1:u.array[r]},setBase:function(r,e){s.array.length-1<r&&a(r),s.array[r]=e},setCheck:function(r,e){u.array.length-1<r&&a(r),u.array[r]=e},setFirstUnusedNode:function(r){i=r},getFirstUnusedNode:function(){return i},shrink:function(){for(var r=this.size()-1;!(0<=u.array[r]);)r--;s.array=s.array.subarray(0,r+2),u.array=u.array.subarray(0,r+2)},calc:function(){for(var r=0,e=u.array.length,t=0;t<e;t++)u.array[t]<0&&r++;return{all:e,unused:r,efficiency:(e-r)/e}},dump:function(){var r,e="",t="";for(r=0;r<s.array.length;r++)e=e+" "+this.getBase(r);for(r=0;r<u.array.length;r++)t=t+" "+this.getCheck(r);return console.log("base:"+e),console.log("chck:"+t),"base:"+e+" chck:"+t}}};function e(e){this.bc=r(e),this.keys=[]}function t(r){this.bc=r,this.bc.shrink()}e.prototype.append=function(r,e){return this.keys.push({k:r,v:e}),this},e.prototype.build=function(r,e){if(null==r&&(r=this.keys),null==r)return new t(this.bc);null==e&&(e=!1);var n=r.map(function(r){return{k:i(r.k+"\0"),v:r.v}});return this.keys=e?n:n.sort(function(r,e){for(var t=r.k,n=e.k,a=Math.min(t.length,n.length),i=0;i<a;i++)if(t[i]!==n[i])return t[i]-n[i];return t.length-n.length}),n=null,this._build(0,0,0,this.keys.length),new t(this.bc)},e.prototype._build=function(r,e,t,n){var a=this.getChildrenInfo(e,t,n),i=this.findAllocatableBase(a);this.setBC(r,a,i);for(var s=0;s<a.length;s+=3){var u=a[s];if(0!==u){var o=a[s+1],f=a[s+2],c=i+u;this._build(c,e+1,o,f)}}},e.prototype.getChildrenInfo=function(r,e,t){var n=this.keys[e].k[r],a=0,i=new Int32Array(3*t);i[a++]=n,i[a++]=e;for(var s=e,u=e;s<e+t;s++){var o=this.keys[s].k[r];n!==o&&(i[a++]=s-u,i[a++]=o,i[a++]=s,n=o,u=s)}return i[a++]=s-u,i=i.subarray(0,a)},e.prototype.setBC=function(r,e,t){var n,a=this.bc;for(a.setBase(r,t),n=0;n<e.length;n+=3){var i=e[n],s=t+i,u=-a.getBase(s),o=-a.getCheck(s);s!==a.getFirstUnusedNode()?a.setCheck(u,-o):a.setFirstUnusedNode(o),a.setBase(o,-u);var f=r;if(a.setCheck(s,f),0===i){var c=e[n+1],h=this.keys[c].v;null==h&&(h=0);var y=-h-1;a.setBase(s,y)}}},e.prototype.findAllocatableBase=function(r){for(var e,t=this.bc,n=t.getFirstUnusedNode();;)if((e=n-r[0])<0)n=-t.getCheck(n);else{for(var a=!0,i=0;i<r.length;i+=3){var s=e+r[i];if(!this.isUnusedNode(s)){n=-t.getCheck(n),a=!1;break}}if(a)return e}},e.prototype.isUnusedNode=function(r){var e=this.bc.getCheck(r);return 0!==r&&e<0},t.prototype.contain=function(r){for(var e=this.bc,t=i(r+="\0"),n=0,a=-1,s=0;s<t.length;s++){var u=t[s];if(-1===(a=this.traverse(n,u)))return!1;if(e.getBase(a)<=0)return!0;n=a}return!1},t.prototype.lookup=function(r){for(var e=i(r+="\0"),t=0,n=-1,a=0;a<e.length;a++){var s=e[a];if(-1===(n=this.traverse(t,s)))return-1;t=n}var u=this.bc.getBase(n);return u<=0?-u-1:-1},t.prototype.commonPrefixSearch=function(r){for(var e=i(r),t=0,n=-1,u=[],o=0;o<e.length;o++){var f=e[o];if(-1===(n=this.traverse(t,f)))break;t=n;var c=this.traverse(n,0);if(-1!==c){var h=this.bc.getBase(c),y={};h<=0&&(y.v=-h-1),y.k=s(a(e,0,o+1)),u.push(y)}}return u},t.prototype.traverse=function(r,e){var t=this.bc.getBase(r)+e;return this.bc.getCheck(t)===r?t:-1},t.prototype.size=function(){return this.bc.size()},t.prototype.calc=function(){return this.bc.calc()},t.prototype.dump=function(){return this.bc.dump()};var n=function(r,e,t){if(r)switch(e){case 1:return new Int8Array(t);case 2:return new Int16Array(t);case 4:return new Int32Array(t);default:throw new RangeError("Invalid newArray parameter element_bytes:"+e)}else switch(e){case 1:return new Uint8Array(t);case 2:return new Uint16Array(t);case 4:return new Uint32Array(t);default:throw new RangeError("Invalid newArray parameter element_bytes:"+e)}},a=function(r,e,t){var n=new ArrayBuffer(t),a=new Uint8Array(n,0,t),i=r.subarray(e,t);return a.set(i),a},i=function(r){for(var e=new Uint8Array(new ArrayBuffer(4*r.length)),t=0,n=0;t<r.length;){var a,i=r.charCodeAt(t++);if(i>=55296&&i<=56319){var s=i,u=r.charCodeAt(t++);if(!(u>=56320&&u<=57343))return null;a=1024*(s-55296)+65536+(u-56320)}else a=i;a<128?e[n++]=a:a<2048?(e[n++]=a>>>6|192,e[n++]=63&a|128):a<65536?(e[n++]=a>>>12|224,e[n++]=a>>6&63|128,e[n++]=63&a|128):a<1<<21&&(e[n++]=a>>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=63&a|128)}return e.subarray(0,n)},s=function(r){for(var e,t,n,a,i="",s=0;s<r.length;)(e=(t=r[s++])<128?t:t>>5==6?(31&t)<<6|63&r[s++]:t>>4==14?(15&t)<<12|(63&r[s++])<<6|63&r[s++]:(7&t)<<18|(63&r[s++])<<12|(63&r[s++])<<6|63&r[s++])<65536?i+=String.fromCharCode(e):(n=55296|(e-=65536)>>10,a=56320|1023&e,i+=String.fromCharCode(n,a));return i},u={builder:function(r){return new e(r)},load:function(e,n){var a=r(0);return a.loadBaseBuffer(e),a.loadCheckBuffer(n),new t(a)}};"undefined"==typeof module?window.doublearray=u:module.exports=u}();

},{}],3:[function(require,module,exports){
"use strict";var node_worker_1=require("./node-worker.cjs"),u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(t,n){for(var e=new u16(31),r=0;r<31;++r)e[r]=n+=1<<t[r-1];var i=new i32(e[30]);for(r=1;r<30;++r)for(var s=e[r];s<e[r+1];++s)i[s]=s-e[r]<<5|r;return{b:e,r:i}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;for(var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768),i=0;i<32768;++i){var x=(43690&i)>>1|(21845&i)<<1;x=(61680&(x=(52428&x)>>2|(13107&x)<<2))>>4|(3855&x)<<4,rev[i]=((65280&x)>>8|(255&x)<<8)>>1}var hMap=function(t,n,e){for(var r=t.length,i=0,s=new u16(n);i<r;++i)t[i]&&++s[t[i]-1];var a,o=new u16(n);for(i=1;i<n;++i)o[i]=o[i-1]+s[i-1]<<1;if(e){a=new u16(1<<n);var f=15-n;for(i=0;i<r;++i)if(t[i])for(var l=i<<4|t[i],u=n-t[i],h=o[t[i]-1]++<<u,c=h|(1<<u)-1;h<=c;++h)a[rev[h]>>f]=l}else for(a=new u16(r),i=0;i<r;++i)t[i]&&(a[i]=rev[o[t[i]-1]++]>>15-t[i]);return a},flt=new u8(288);for(i=0;i<144;++i)flt[i]=8;for(i=144;i<256;++i)flt[i]=9;for(i=256;i<280;++i)flt[i]=7;for(i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(i=0;i<32;++i)fdt[i]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(t){for(var n=t[0],e=1;e<t.length;++e)t[e]>n&&(n=t[e]);return n},bits=function(t,n,e){var r=n/8|0;return(t[r]|t[r+1]<<8)>>(7&n)&e},bits16=function(t,n){var e=n/8|0;return(t[e]|t[e+1]<<8|t[e+2]<<16)>>(7&n)},shft=function(t){return(t+7)/8|0},slc=function(t,n,e){(null==n||n<0)&&(n=0),(null==e||e>t.length)&&(e=t.length);var r=new u8(e-n);return r.set(t.subarray(n,e)),r};exports.FlateErrorCode={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14};var ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(t,n,e){var r=new Error(n||ec[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,err),!e)throw r;return r},inflt=function(t,n,e,r){var i=t.length,s=r?r.length:0;if(!i||n.f&&!n.l)return e||new u8(0);var a=!e||2!=n.i,o=n.i;e||(e=new u8(3*i));var f=function(t){var n=e.length;if(t>n){var r=new u8(Math.max(2*n,t));r.set(e),e=r}},l=n.f||0,u=n.p||0,h=n.b||0,c=n.l,p=n.d,v=n.m,b=n.n,d=8*i;do{if(!c){l=bits(t,u,1);var y=bits(t,u+1,3);if(u+=3,!y){var g=t[(T=shft(u)+4)-4]|t[T-3]<<8,m=T+g;if(m>i){o&&err(0);break}a&&f(h+g),e.set(t.subarray(T,m),h),n.b=h+=g,n.p=u=8*m,n.f=l;continue}if(1==y)c=flrm,p=fdrm,v=9,b=5;else if(2==y){var z=bits(t,u,31)+257,w=bits(t,u+10,15)+4,x=z+bits(t,u+5,31)+1;u+=14;for(var S=new u8(x),D=new u8(19),U=0;U<w;++U)D[clim[U]]=bits(t,u+3*U,7);u+=3*w;var k=max(D),A=(1<<k)-1,I=hMap(D,k,1);for(U=0;U<x;){var T,M=I[bits(t,u,A)];if(u+=15&M,(T=M>>4)<16)S[U++]=T;else{var Z=0,G=0;for(16==T?(G=3+bits(t,u,3),u+=2,Z=S[U-1]):17==T?(G=3+bits(t,u,7),u+=3):18==T&&(G=11+bits(t,u,127),u+=7);G--;)S[U++]=Z}}var F=S.subarray(0,z),C=S.subarray(z);v=max(F),b=max(C),c=hMap(F,v,1),p=hMap(C,b,1)}else err(1);if(u>d){o&&err(0);break}}a&&f(h+131072);for(var O=(1<<v)-1,E=(1<<b)-1,P=u;;P=u){var _=(Z=c[bits16(t,u)&O])>>4;if((u+=15&Z)>d){o&&err(0);break}if(Z||err(2),_<256)e[h++]=_;else{if(256==_){P=u,c=null;break}var L=_-254;if(_>264){var q=fleb[U=_-257];L=bits(t,u,(1<<q)-1)+fl[U],u+=q}var H=p[bits16(t,u)&E],j=H>>4;H||err(3),u+=15&H;C=fd[j];if(j>3){q=fdeb[j];C+=bits16(t,u)&(1<<q)-1,u+=q}if(u>d){o&&err(0);break}a&&f(h+131072);var N=h+L;if(h<C){var B=s-C,Y=Math.min(C,N);for(B+h<0&&err(3);h<Y;++h)e[h]=r[B+h]}for(;h<N;h+=4)e[h]=e[h-C],e[h+1]=e[h+1-C],e[h+2]=e[h+2-C],e[h+3]=e[h+3-C];h=N}}n.l=c,n.p=P,n.b=h,n.f=l,c&&(l=1,n.m=v,n.d=p,n.n=b)}while(!l);return h==e.length?e:slc(e,0,h)},wbits=function(t,n,e){e<<=7&n;var r=n/8|0;t[r]|=e,t[r+1]|=e>>8},wbits16=function(t,n,e){e<<=7&n;var r=n/8|0;t[r]|=e,t[r+1]|=e>>8,t[r+2]|=e>>16},hTree=function(t,n){for(var e=[],r=0;r<t.length;++r)t[r]&&e.push({s:r,f:t[r]});var i=e.length,s=e.slice();if(!i)return{t:et,l:0};if(1==i){var a=new u8(e[0].s+1);return a[e[0].s]=1,{t:a,l:1}}e.sort(function(t,n){return t.f-n.f}),e.push({s:-1,f:25001});var o=e[0],f=e[1],l=0,u=1,h=2;for(e[0]={s:-1,f:o.f+f.f,l:o,r:f};u!=i-1;)o=e[e[l].f<e[h].f?l++:h++],f=e[l!=u&&e[l].f<e[h].f?l++:h++],e[u++]={s:-1,f:o.f+f.f,l:o,r:f};var c=s[0].s;for(r=1;r<i;++r)s[r].s>c&&(c=s[r].s);var p=new u16(c+1),v=ln(e[u-1],p,0);if(v>n){r=0;var b=0,d=v-n,y=1<<d;for(s.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});r<i;++r){var g=s[r].s;if(!(p[g]>n))break;b+=y-(1<<v-p[g]),p[g]=n}for(b>>=d;b>0;){var m=s[r].s;p[m]<n?b-=1<<n-p[m]++-1:++r}for(;r>=0&&b;--r){var z=s[r].s;p[z]==n&&(--p[z],++b)}v=n}return{t:new u8(p),l:v}},ln=function(t,n,e){return-1==t.s?Math.max(ln(t.l,n,e+1),ln(t.r,n,e+1)):n[t.s]=e},lc=function(t){for(var n=t.length;n&&!t[--n];);for(var e=new u16(++n),r=0,i=t[0],s=1,a=function(t){e[r++]=t},o=1;o<=n;++o)if(t[o]==i&&o!=n)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:e.subarray(0,r),n:n}},clen=function(t,n){for(var e=0,r=0;r<n.length;++r)e+=t[r]*n[r];return e},wfblk=function(t,n,e){var r=e.length,i=shft(n+2);t[i]=255&r,t[i+1]=r>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<r;++s)t[i+s+4]=e[s];return 8*(i+4+r)},wblk=function(t,n,e,r,i,s,a,o,f,l,u){wbits(n,u++,e),++i[256];for(var h=hTree(i,15),c=h.t,p=h.l,v=hTree(s,15),b=v.t,d=v.l,y=lc(c),g=y.c,m=y.n,z=lc(b),w=z.c,x=z.n,S=new u16(19),D=0;D<g.length;++D)++S[31&g[D]];for(D=0;D<w.length;++D)++S[31&w[D]];for(var U=hTree(S,7),k=U.t,A=U.l,I=19;I>4&&!k[clim[I-1]];--I);var T,M,Z,G,F=l+5<<3,C=clen(i,flt)+clen(s,fdt)+a,O=clen(i,c)+clen(s,b)+a+14+3*I+clen(S,k)+2*S[16]+3*S[17]+7*S[18];if(f>=0&&F<=C&&F<=O)return wfblk(n,u,t.subarray(f,f+l));if(wbits(n,u,1+(O<C)),u+=2,O<C){T=hMap(c,p,0),M=c,Z=hMap(b,d,0),G=b;var E=hMap(k,A,0);wbits(n,u,m-257),wbits(n,u+5,x-1),wbits(n,u+10,I-4),u+=14;for(D=0;D<I;++D)wbits(n,u+3*D,k[clim[D]]);u+=3*I;for(var P=[g,w],_=0;_<2;++_){var L=P[_];for(D=0;D<L.length;++D){var q=31&L[D];wbits(n,u,E[q]),u+=k[q],q>15&&(wbits(n,u,L[D]>>5&127),u+=L[D]>>12)}}}else T=flm,M=flt,Z=fdm,G=fdt;for(D=0;D<o;++D){var H=r[D];if(H>255){wbits16(n,u,T[(q=H>>18&31)+257]),u+=M[q+257],q>7&&(wbits(n,u,H>>23&31),u+=fleb[q]);var j=31&H;wbits16(n,u,Z[j]),u+=G[j],j>3&&(wbits16(n,u,H>>5&8191),u+=fdeb[j])}else wbits16(n,u,T[H]),u+=M[H]}return wbits16(n,u,T[256]),u+M[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new u8(0),dflt=function(t,n,e,r,i,s){var a=s.z||t.length,o=new u8(r+a+5*(1+Math.ceil(a/7e3))+i),f=o.subarray(r,o.length-i),l=s.l,u=7&(s.r||0);if(n){u&&(f[0]=s.r>>3);for(var h=deo[n-1],c=h>>13,p=8191&h,v=(1<<e)-1,b=s.p||new u16(32768),d=s.h||new u16(v+1),y=Math.ceil(e/3),g=2*y,m=function(n){return(t[n]^t[n+1]<<y^t[n+2]<<g)&v},z=new i32(25e3),w=new u16(288),x=new u16(32),S=0,D=0,U=s.i||0,k=0,A=s.w||0,I=0;U+2<a;++U){var T=m(U),M=32767&U,Z=d[T];if(b[M]=Z,d[T]=M,A<=U){var G=a-U;if((S>7e3||k>24576)&&(G>423||!l)){u=wblk(t,f,0,z,w,x,D,k,I,U-I,u),k=S=D=0,I=U;for(var F=0;F<286;++F)w[F]=0;for(F=0;F<30;++F)x[F]=0}var C=2,O=0,E=p,P=M-Z&32767;if(G>2&&T==m(U-P))for(var _=Math.min(c,G)-1,L=Math.min(32767,U),q=Math.min(258,G);P<=L&&--E&&M!=Z;){if(t[U+C]==t[U+C-P]){for(var H=0;H<q&&t[U+H]==t[U+H-P];++H);if(H>C){if(C=H,O=P,H>_)break;var j=Math.min(P,H-2),N=0;for(F=0;F<j;++F){var B=U-P+F&32767,Y=B-b[B]&32767;Y>N&&(N=Y,Z=B)}}}P+=(M=Z)-(Z=b[M])&32767}if(O){z[k++]=268435456|revfl[C]<<18|revfd[O];var J=31&revfl[C],K=31&revfd[O];D+=fleb[J]+fdeb[K],++w[257+J],++x[K],A=U+C,++S}else z[k++]=t[U],++w[t[U]]}}for(U=Math.max(U,A);U<a;++U)z[k++]=t[U],++w[t[U]];u=wblk(t,f,l,z,w,x,D,k,I,U-I,u),l||(s.r=7&u|f[u/8|0]<<3,u-=7,s.h=d,s.p=b,s.i=U,s.w=A)}else{for(U=s.w||0;U<a+l;U+=65535){var Q=U+65535;Q>=a&&(f[u/8|0]=l,Q=a),u=wfblk(f,u+1,t.subarray(U,Q))}s.i=a}return slc(o,0,r+shft(u)+i)},crct=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var e=n,r=9;--r;)e=(1&e&&-306674912)^e>>>1;t[n]=e}return t}(),crc=function(){var t=-1;return{p:function(n){for(var e=t,r=0;r<n.length;++r)e=crct[255&e^n[r]]^e>>>8;t=e},d:function(){return~t}}},adler=function(){var t=1,n=0;return{p:function(e){for(var r=t,i=n,s=0|e.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=e[a];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}t=r,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},dopt=function(t,n,e,r,i){if(!i&&(i={l:1},n.dictionary)){var s=n.dictionary.subarray(-32768),a=new u8(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return dflt(t,null==n.level?6:n.level,null==n.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+n.mem,e,r,i)},mrg=function(t,n){var e={};for(var r in t)e[r]=t[r];for(var r in n)e[r]=n[r];return e},wcln=function(t,n,e){for(var r=t(),i=t.toString(),s=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),a=0;a<r.length;++a){var o=r[a],f=s[a];if("function"==typeof o){n+=";"+f+"=";var l=o.toString();if(o.prototype)if(-1!=l.indexOf("[native code]")){var u=l.indexOf(" ",8)+1;n+=l.slice(u,l.indexOf("(",u))}else for(var h in n+=l,o.prototype)n+=";"+f+".prototype."+h+"="+o.prototype[h].toString();else n+=l}else e[f]=o}return n},ch=[],cbfs=function(t){var n=[];for(var e in t)t[e].buffer&&n.push((t[e]=new t[e].constructor(t[e])).buffer);return n},wrkr=function(t,n,e,r){if(!ch[e]){for(var i="",s={},a=t.length-1,o=0;o<a;++o)i=wcln(t[o],i,s);ch[e]={c:wcln(t[a],i,s),e:s}}var f=mrg({},ch[e].e);return node_worker_1.default(ch[e].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",e,f,cbfs(f),r)},bInflt=function(){return[u8,u16,i32,fleb,fdeb,clim,fl,fd,flrm,fdrm,rev,ec,hMap,max,bits,bits16,shft,slc,err,inflt,inflateSync,pbf,gopt]},bDflt=function(){return[u8,u16,i32,fleb,fdeb,clim,revfl,revfd,flm,flt,fdm,fdt,rev,deo,et,hMap,wbits,wbits16,hTree,ln,lc,clen,wfblk,wblk,shft,slc,dflt,dopt,deflateSync,pbf]},gze=function(){return[gzh,gzhl,wbytes,crc,crct]},guze=function(){return[gzs,gzl]},zle=function(){return[zlh,wbytes,adler]},zule=function(){return[zls]},pbf=function(t){return postMessage(t,[t.buffer])},gopt=function(t){return t&&{out:t.size&&new u8(t.size),dictionary:t.dictionary}},cbify=function(t,n,e,r,i,s){var a=wrkr(e,r,i,function(t,n){a.terminate(),s(t,n)});return a.postMessage([t,n],n.consume?[t.buffer]:[]),function(){a.terminate()}},astrm=function(t){return t.ondata=function(t,n){return postMessage([t,n],[t.buffer])},function(n){return t.push(n.data[0],n.data[1])}},astrmify=function(t,n,e,r,i,s){var a,o=wrkr(t,r,i,function(t,e){t?(o.terminate(),n.ondata.call(n,t)):Array.isArray(e)?(e[1]&&o.terminate(),n.ondata.call(n,t,e[0],e[1])):s(e)});o.postMessage(e),n.push=function(t,e){n.ondata||err(5),a&&n.ondata(err(4,0,1),null,!!e),o.postMessage([t,a=e],[t.buffer])},n.terminate=function(){o.terminate()}},b2=function(t,n){return t[n]|t[n+1]<<8},b4=function(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16|t[n+3]<<24)>>>0},b8=function(t,n){return b4(t,n)+4294967296*b4(t,n+4)},wbytes=function(t,n,e){for(;e;++n)t[n]=e,e>>>=8},gzh=function(t,n){var e=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&wbytes(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),e){t[3]=8;for(var r=0;r<=e.length;++r)t[r+10]=e.charCodeAt(r)}},gzs=function(t){31==t[0]&&139==t[1]&&8==t[2]||err(6,"invalid gzip data");var n=t[3],e=10;4&n&&(e+=2+(t[10]|t[11]<<8));for(var r=(n>>3&1)+(n>>4&1);r>0;r-=!t[e++]);return e+(2&n)},gzl=function(t){var n=t.length;return(t[n-4]|t[n-3]<<8|t[n-2]<<16|t[n-1]<<24)>>>0},gzhl=function(t){return 10+(t.filename?t.filename.length+1:0)},zlh=function(t,n){var e=n.level,r=0==e?0:e<6?1:9==e?3:2;if(t[0]=120,t[1]=r<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=adler();i.p(n.dictionary),wbytes(t,2,i.d())}},zls=function(t,n){return(8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31)&&err(6,"invalid zlib data"),(t[1]>>5&1)==+!n&&err(6,"invalid zlib data: "+(32&t[1]?"need":"unexpected")+" dictionary"),2+(t[1]>>3&4)};function StrmOpt(t,n){return"function"==typeof t&&(n=t,t={}),this.ondata=n,t}var Deflate=function(){function t(t,n){if("function"==typeof t&&(n=t,t={}),this.ondata=n,this.o=t||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new u8(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return t.prototype.p=function(t,n){this.ondata(dopt(t,this.o,0,0,this.s),n)},t.prototype.push=function(t,n){this.ondata||err(5),this.s.l&&err(4);var e=t.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var r=new u8(-32768&e);r.set(this.b.subarray(0,this.s.z)),this.b=r}var i=this.b.length-this.s.z;i&&(this.b.set(t.subarray(0,i),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(t.subarray(i),32768),this.s.z=t.length-i+32768,this.s.i=32766,this.s.w=32768}else this.b.set(t,this.s.z),this.s.z+=t.length;this.s.l=1&n,(this.s.z>this.s.w+8191||n)&&(this.p(this.b,n||!1),this.s.w=this.s.i,this.s.i-=2)},t}();exports.Deflate=Deflate;var AsyncDeflate=function(){return function(t,n){astrmify([bDflt,function(){return[astrm,Deflate]}],this,StrmOpt.call(this,t,n),function(t){var n=new Deflate(t.data);onmessage=astrm(n)},6)}}();function deflate(t,n,e){return e||(e=n,n={}),"function"!=typeof e&&err(7),cbify(t,n,[bDflt],function(t){return pbf(deflateSync(t.data[0],t.data[1]))},0,e)}function deflateSync(t,n){return dopt(t,n||{},0,0)}exports.AsyncDeflate=AsyncDeflate,exports.deflate=deflate,exports.deflateSync=deflateSync;var Inflate=function(){function t(t,n){"function"==typeof t&&(n=t,t={}),this.ondata=n;var e=t&&t.dictionary&&t.dictionary.subarray(-32768);this.s={i:0,b:e?e.length:0},this.o=new u8(32768),this.p=new u8(0),e&&this.o.set(e)}return t.prototype.e=function(t){if(this.ondata||err(5),this.d&&err(4),this.p.length){if(t.length){var n=new u8(this.p.length+t.length);n.set(this.p),n.set(t,this.p.length),this.p=n}}else this.p=t},t.prototype.c=function(t){this.s.i=+(this.d=t||!1);var n=this.s.b,e=inflt(this.p,this.s,this.o);this.ondata(slc(e,n,this.s.b),this.d),this.o=slc(e,this.s.b-32768),this.s.b=this.o.length,this.p=slc(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(t,n){this.e(t),this.c(n)},t}();exports.Inflate=Inflate;var AsyncInflate=function(){return function(t,n){astrmify([bInflt,function(){return[astrm,Inflate]}],this,StrmOpt.call(this,t,n),function(t){var n=new Inflate(t.data);onmessage=astrm(n)},7)}}();function inflate(t,n,e){return e||(e=n,n={}),"function"!=typeof e&&err(7),cbify(t,n,[bInflt],function(t){return pbf(inflateSync(t.data[0],gopt(t.data[1])))},1,e)}function inflateSync(t,n){return inflt(t,{i:2},n&&n.out,n&&n.dictionary)}exports.AsyncInflate=AsyncInflate,exports.inflate=inflate,exports.inflateSync=inflateSync;var Gzip=function(){function t(t,n){this.c=crc(),this.l=0,this.v=1,Deflate.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),this.l+=t.length,Deflate.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var e=dopt(t,this.o,this.v&&gzhl(this.o),n&&8,this.s);this.v&&(gzh(e,this.o),this.v=0),n&&(wbytes(e,e.length-8,this.c.d()),wbytes(e,e.length-4,this.l)),this.ondata(e,n)},t}();exports.Gzip=Gzip,exports.Compress=Gzip;var AsyncGzip=function(){return function(t,n){astrmify([bDflt,gze,function(){return[astrm,Deflate,Gzip]}],this,StrmOpt.call(this,t,n),function(t){var n=new Gzip(t.data);onmessage=astrm(n)},8)}}();function gzip(t,n,e){return e||(e=n,n={}),"function"!=typeof e&&err(7),cbify(t,n,[bDflt,gze,function(){return[gzipSync]}],function(t){return pbf(gzipSync(t.data[0],t.data[1]))},2,e)}function gzipSync(t,n){n||(n={});var e=crc(),r=t.length;e.p(t);var i=dopt(t,n,gzhl(n),8),s=i.length;return gzh(i,n),wbytes(i,s-8,e.d()),wbytes(i,s-4,r),i}exports.AsyncGzip=AsyncGzip,exports.AsyncCompress=AsyncGzip,exports.gzip=gzip,exports.compress=gzip,exports.gzipSync=gzipSync,exports.compressSync=gzipSync;var Gunzip=function(){function t(t,n){this.v=1,this.r=0,Inflate.call(this,t,n)}return t.prototype.push=function(t,n){if(Inflate.prototype.e.call(this,t),this.r+=t.length,this.v){var e=this.p.subarray(this.v-1),r=e.length>3?gzs(e):4;if(r>e.length){if(!n)return}else this.v>1&&this.onmember&&this.onmember(this.r-e.length);this.p=e.subarray(r),this.v=0}Inflate.prototype.c.call(this,n),this.s.f&&!this.s.l&&(this.v=shft(this.s.p)+9,this.s={i:0},this.o=new u8(0),this.p.length&&this.push(new u8(0),n))},t}();exports.Gunzip=Gunzip;var AsyncGunzip=function(){return function(t,n){var e=this;astrmify([bInflt,guze,function(){return[astrm,Inflate,Gunzip]}],this,StrmOpt.call(this,t,n),function(t){var n=new Gunzip(t.data);n.onmember=function(t){return postMessage(t)},onmessage=astrm(n)},9,function(t){return e.onmember&&e.onmember(t)})}}();function gunzip(t,n,e){return e||(e=n,n={}),"function"!=typeof e&&err(7),cbify(t,n,[bInflt,guze,function(){return[gunzipSync]}],function(t){return pbf(gunzipSync(t.data[0],t.data[1]))},3,e)}function gunzipSync(t,n){var e=gzs(t);return e+8>t.length&&err(6,"invalid gzip data"),inflt(t.subarray(e,-8),{i:2},n&&n.out||new u8(gzl(t)),n&&n.dictionary)}exports.AsyncGunzip=AsyncGunzip,exports.gunzip=gunzip,exports.gunzipSync=gunzipSync;var Zlib=function(){function t(t,n){this.c=adler(),this.v=1,Deflate.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),Deflate.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var e=dopt(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(zlh(e,this.o),this.v=0),n&&wbytes(e,e.length-4,this.c.d()),this.ondata(e,n)},t}();exports.Zlib=Zlib;var AsyncZlib=function(){return function(t,n){astrmify([bDflt,zle,function(){return[astrm,Deflate,Zlib]}],this,StrmOpt.call(this,t,n),function(t){var n=new Zlib(t.data);onmessage=astrm(n)},10)}}();function zlib(t,n,e){return e||(e=n,n={}),"function"!=typeof e&&err(7),cbify(t,n,[bDflt,zle,function(){return[zlibSync]}],function(t){return pbf(zlibSync(t.data[0],t.data[1]))},4,e)}function zlibSync(t,n){n||(n={});var e=adler();e.p(t);var r=dopt(t,n,n.dictionary?6:2,4);return zlh(r,n),wbytes(r,r.length-4,e.d()),r}exports.AsyncZlib=AsyncZlib,exports.zlib=zlib,exports.zlibSync=zlibSync;var Unzlib=function(){function t(t,n){Inflate.call(this,t,n),this.v=t&&t.dictionary?2:1}return t.prototype.push=function(t,n){if(Inflate.prototype.e.call(this,t),this.v){if(this.p.length<6&&!n)return;this.p=this.p.subarray(zls(this.p,this.v-1)),this.v=0}n&&(this.p.length<4&&err(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),Inflate.prototype.c.call(this,n)},t}();exports.Unzlib=Unzlib;var AsyncUnzlib=function(){return function(t,n){astrmify([bInflt,zule,function(){return[astrm,Inflate,Unzlib]}],this,StrmOpt.call(this,t,n),function(t){var n=new Unzlib(t.data);onmessage=astrm(n)},11)}}();function unzlib(t,n,e){return e||(e=n,n={}),"function"!=typeof e&&err(7),cbify(t,n,[bInflt,zule,function(){return[unzlibSync]}],function(t){return pbf(unzlibSync(t.data[0],gopt(t.data[1])))},5,e)}function unzlibSync(t,n){return inflt(t.subarray(zls(t,n&&n.dictionary),-4),{i:2},n&&n.out,n&&n.dictionary)}exports.AsyncUnzlib=AsyncUnzlib,exports.unzlib=unzlib,exports.unzlibSync=unzlibSync;var Decompress=function(){function t(t,n){this.G=Gunzip,this.I=Inflate,this.Z=Unzlib,this.o=StrmOpt.call(this,t,n)||{}}return t.prototype.push=function(t,n){if(this.ondata||err(5),this.s)this.s.push(t,n);else{if(this.p&&this.p.length){var e=new u8(this.p.length+t.length);e.set(this.p),e.set(t,this.p.length)}else this.p=t;if(this.p.length>2){var r=this,i=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(this.o,i):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(this.o,i):new this.Z(this.o,i),this.s.push(this.p,n),this.p=null}}},t}();exports.Decompress=Decompress;var AsyncDecompress=function(){function t(t,n){this.G=AsyncGunzip,this.I=AsyncInflate,this.Z=AsyncUnzlib,Decompress.call(this,t,n)}return t.prototype.push=function(t,n){Decompress.prototype.push.call(this,t,n)},t}();function decompress(t,n,e){return e||(e=n,n={}),"function"!=typeof e&&err(7),31==t[0]&&139==t[1]&&8==t[2]?gunzip(t,n,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?inflate(t,n,e):unzlib(t,n,e)}function decompressSync(t,n){return 31==t[0]&&139==t[1]&&8==t[2]?gunzipSync(t,n):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?inflateSync(t,n):unzlibSync(t,n)}exports.AsyncDecompress=AsyncDecompress,exports.decompress=decompress,exports.decompressSync=decompressSync;var fltn=function(t,n,e,r){for(var i in t){var s=t[i],a=n+i,o=r;Array.isArray(s)&&(o=mrg(r,s[1]),s=s[0]),s instanceof u8?e[a]=[s,o]:(e[a+="/"]=[new u8(0),o],fltn(s,a,e,r))}},te="undefined"!=typeof TextEncoder&&new TextEncoder,td="undefined"!=typeof TextDecoder&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(t){}var dutf8=function(t){for(var n="",e=0;;){var r=t[e++],i=(r>127)+(r>223)+(r>239);if(e+i>t.length)return{s:n,r:slc(t,e-1)};i?3==i?(r=((15&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,n+=String.fromCharCode(55296|r>>10,56320|1023&r)):n+=1&i?String.fromCharCode((31&r)<<6|63&t[e++]):String.fromCharCode((15&r)<<12|(63&t[e++])<<6|63&t[e++]):n+=String.fromCharCode(r)}},DecodeUTF8=function(){function t(t){this.ondata=t,tds?this.t=new TextDecoder:this.p=et}return t.prototype.push=function(t,n){if(this.ondata||err(5),n=!!n,this.t)return this.ondata(this.t.decode(t,{stream:!0}),n),void(n&&(this.t.decode().length&&err(8),this.t=null));this.p||err(4);var e=new u8(this.p.length+t.length);e.set(this.p),e.set(t,this.p.length);var r=dutf8(e),i=r.s,s=r.r;n?(s.length&&err(8),this.p=null):this.p=s,this.ondata(i,n)},t}();exports.DecodeUTF8=DecodeUTF8;var EncodeUTF8=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||err(5),this.d&&err(4),this.ondata(strToU8(t),this.d=n||!1)},t}();function strToU8(t,n){if(n){for(var e=new u8(t.length),r=0;r<t.length;++r)e[r]=t.charCodeAt(r);return e}if(te)return te.encode(t);var i=t.length,s=new u8(t.length+(t.length>>1)),a=0,o=function(t){s[a++]=t};for(r=0;r<i;++r){if(a+5>s.length){var f=new u8(a+8+(i-r<<1));f.set(s),s=f}var l=t.charCodeAt(r);l<128||n?o(l):l<2048?(o(192|l>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++r))>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|63&l)):(o(224|l>>12),o(128|l>>6&63),o(128|63&l))}return slc(s,0,a)}function strFromU8(t,n){if(n){for(var e="",r=0;r<t.length;r+=16384)e+=String.fromCharCode.apply(null,t.subarray(r,r+16384));return e}if(td)return td.decode(t);var i=dutf8(t),s=i.s;return(e=i.r).length&&err(8),s}exports.EncodeUTF8=EncodeUTF8,exports.strToU8=strToU8,exports.strFromU8=strFromU8;var dbf=function(t){return 1==t?3:t<6?2:9==t?1:0},slzh=function(t,n){return n+30+b2(t,n+26)+b2(t,n+28)},zh=function(t,n,e){var r=b2(t,n+28),i=strFromU8(t.subarray(n+46,n+46+r),!(2048&b2(t,n+8))),s=n+46+r,a=b4(t,n+20),o=e&&4294967295==a?z64e(t,s):[a,b4(t,n+24),b4(t,n+42)],f=o[0],l=o[1],u=o[2];return[b2(t,n+10),f,l,i,s+b2(t,n+30)+b2(t,n+32),u]},z64e=function(t,n){for(;1!=b2(t,n);n+=4+b2(t,n+2));return[b8(t,n+12),b8(t,n+4),b8(t,n+20)]},exfl=function(t){var n=0;if(t)for(var e in t){var r=t[e].length;r>65535&&err(9),n+=r+4}return n},wzh=function(t,n,e,r,i,s,a,o){var f=r.length,l=e.extra,u=o&&o.length,h=exfl(l);wbytes(t,n,null!=a?33639248:67324752),n+=4,null!=a&&(t[n++]=20,t[n++]=e.os),t[n]=20,n+=2,t[n++]=e.flag<<1|(s<0&&8),t[n++]=i&&8,t[n++]=255&e.compression,t[n++]=e.compression>>8;var c=new Date(null==e.mtime?Date.now():e.mtime),p=c.getFullYear()-1980;if((p<0||p>119)&&err(10),wbytes(t,n,p<<25|c.getMonth()+1<<21|c.getDate()<<16|c.getHours()<<11|c.getMinutes()<<5|c.getSeconds()>>1),n+=4,-1!=s&&(wbytes(t,n,e.crc),wbytes(t,n+4,s<0?-s-2:s),wbytes(t,n+8,e.size)),wbytes(t,n+12,f),wbytes(t,n+14,h),n+=16,null!=a&&(wbytes(t,n,u),wbytes(t,n+6,e.attrs),wbytes(t,n+10,a),n+=14),t.set(r,n),n+=f,h)for(var v in l){var b=l[v],d=b.length;wbytes(t,n,+v),wbytes(t,n+2,d),t.set(b,n+4),n+=4+d}return u&&(t.set(o,n),n+=u),n},wzf=function(t,n,e,r,i){wbytes(t,n,101010256),wbytes(t,n+8,e),wbytes(t,n+10,e),wbytes(t,n+12,r),wbytes(t,n+16,i)},ZipPassThrough=function(){function t(t){this.filename=t,this.c=crc(),this.size=0,this.compression=0}return t.prototype.process=function(t,n){this.ondata(null,t,n)},t.prototype.push=function(t,n){this.ondata||err(5),this.c.p(t),this.size+=t.length,n&&(this.crc=this.c.d()),this.process(t,n||!1)},t}();exports.ZipPassThrough=ZipPassThrough;var ZipDeflate=function(){function t(t,n){var e=this;n||(n={}),ZipPassThrough.call(this,t),this.d=new Deflate(n,function(t,n){e.ondata(null,t,n)}),this.compression=8,this.flag=dbf(n.level)}return t.prototype.process=function(t,n){try{this.d.push(t,n)}catch(t){this.ondata(t,null,n)}},t.prototype.push=function(t,n){ZipPassThrough.prototype.push.call(this,t,n)},t}();exports.ZipDeflate=ZipDeflate;var AsyncZipDeflate=function(){function t(t,n){var e=this;n||(n={}),ZipPassThrough.call(this,t),this.d=new AsyncDeflate(n,function(t,n,r){e.ondata(t,n,r)}),this.compression=8,this.flag=dbf(n.level),this.terminate=this.d.terminate}return t.prototype.process=function(t,n){this.d.push(t,n)},t.prototype.push=function(t,n){ZipPassThrough.prototype.push.call(this,t,n)},t}();exports.AsyncZipDeflate=AsyncZipDeflate;var Zip=function(){function t(t){this.ondata=t,this.u=[],this.d=1}return t.prototype.add=function(t){var n=this;if(this.ondata||err(5),2&this.d)this.ondata(err(4+8*(1&this.d),0,1),null,!1);else{var e=strToU8(t.filename),r=e.length,i=t.comment,s=i&&strToU8(i),a=r!=t.filename.length||s&&i.length!=s.length,o=r+exfl(t.extra)+30;r>65535&&this.ondata(err(11,0,1),null,!1);var f=new u8(o);wzh(f,0,t,e,a,-1);var l=[f],u=function(){for(var t=0,e=l;t<e.length;t++){var r=e[t];n.ondata(null,r,!1)}l=[]},h=this.d;this.d=0;var c=this.u.length,p=mrg(t,{f:e,u:a,o:s,t:function(){t.terminate&&t.terminate()},r:function(){if(u(),h){var t=n.u[c+1];t?t.r():n.d=1}h=1}}),v=0;t.ondata=function(e,r,i){if(e)n.ondata(e,r,i),n.terminate();else if(v+=r.length,l.push(r),i){var s=new u8(16);wbytes(s,0,134695760),wbytes(s,4,t.crc),wbytes(s,8,v),wbytes(s,12,t.size),l.push(s),p.c=v,p.b=o+v+16,p.crc=t.crc,p.size=t.size,h&&p.r(),h=1}else h&&u()},this.u.push(p)}},t.prototype.end=function(){var t=this;2&this.d?this.ondata(err(4+8*(1&this.d),0,1),null,!0):(this.d?this.e():this.u.push({r:function(){1&t.d&&(t.u.splice(-1,1),t.e())},t:function(){}}),this.d=3)},t.prototype.e=function(){for(var t=0,n=0,e=0,r=0,i=this.u;r<i.length;r++){e+=46+(f=i[r]).f.length+exfl(f.extra)+(f.o?f.o.length:0)}for(var s=new u8(e+22),a=0,o=this.u;a<o.length;a++){var f=o[a];wzh(s,t,f,f.f,f.u,-f.c-2,n,f.o),t+=46+f.f.length+exfl(f.extra)+(f.o?f.o.length:0),n+=f.b}wzf(s,t,this.u.length,e,n),this.ondata(null,s,!0),this.d=2},t.prototype.terminate=function(){for(var t=0,n=this.u;t<n.length;t++){n[t].t()}this.d=2},t}();function zip(t,n,e){e||(e=n,n={}),"function"!=typeof e&&err(7);var r={};fltn(t,"",r,n);var i=Object.keys(r),s=i.length,a=0,o=0,f=s,l=new Array(s),u=[],h=function(){for(var t=0;t<u.length;++t)u[t]()},c=function(t,n){mt(function(){e(t,n)})};mt(function(){c=e});var p=function(){var t=new u8(o+22),n=a,e=o-a;o=0;for(var r=0;r<f;++r){var i=l[r];try{var s=i.c.length;wzh(t,o,i,i.f,i.u,s);var u=30+i.f.length+exfl(i.extra),h=o+u;t.set(i.c,h),wzh(t,a,i,i.f,i.u,s,o,i.m),a+=16+u+(i.m?i.m.length:0),o=h+s}catch(t){return c(t,null)}}wzf(t,a,l.length,e,n),c(null,t)};s||p();for(var v=function(t){var n=i[t],e=r[n],f=e[0],v=e[1],b=crc(),d=f.length;b.p(f);var y=strToU8(n),g=y.length,m=v.comment,z=m&&strToU8(m),w=z&&z.length,x=exfl(v.extra),S=0==v.level?0:8,D=function(e,r){if(e)h(),c(e,null);else{var i=r.length;l[t]=mrg(v,{size:d,crc:b.d(),c:r,f:y,m:z,u:g!=n.length||z&&m.length!=w,compression:S}),a+=30+g+x+i,o+=76+2*(g+x)+(w||0)+i,--s||p()}};if(g>65535&&D(err(11,0,1),null),S)if(d<16e4)try{D(null,deflateSync(f,v))}catch(t){D(t,null)}else u.push(deflate(f,v,D));else D(null,f)},b=0;b<f;++b)v(b);return h}function zipSync(t,n){n||(n={});var e={},r=[];fltn(t,"",e,n);var i=0,s=0;for(var a in e){var o=e[a],f=o[0],l=o[1],u=0==l.level?0:8,h=(S=strToU8(a)).length,c=l.comment,p=c&&strToU8(c),v=p&&p.length,b=exfl(l.extra);h>65535&&err(11);var d=u?deflateSync(f,l):f,y=d.length,g=crc();g.p(f),r.push(mrg(l,{size:f.length,crc:g.d(),c:d,f:S,m:p,u:h!=a.length||p&&c.length!=v,o:i,compression:u})),i+=30+h+b+y,s+=76+2*(h+b)+(v||0)+y}for(var m=new u8(s+22),z=i,w=s-i,x=0;x<r.length;++x){var S=r[x];wzh(m,S.o,S,S.f,S.u,S.c.length);var D=30+S.f.length+exfl(S.extra);m.set(S.c,S.o+D),wzh(m,i,S,S.f,S.u,S.c.length,S.o,S.m),i+=16+D+(S.m?S.m.length:0)}return wzf(m,i,r.length,w,z),m}exports.Zip=Zip,exports.zip=zip,exports.zipSync=zipSync;var UnzipPassThrough=function(){function t(){}return t.prototype.push=function(t,n){this.ondata(null,t,n)},t.compression=0,t}();exports.UnzipPassThrough=UnzipPassThrough;var UnzipInflate=function(){function t(){var t=this;this.i=new Inflate(function(n,e){t.ondata(null,n,e)})}return t.prototype.push=function(t,n){try{this.i.push(t,n)}catch(t){this.ondata(t,null,n)}},t.compression=8,t}();exports.UnzipInflate=UnzipInflate;var AsyncUnzipInflate=function(){function t(t,n){var e=this;n<32e4?this.i=new Inflate(function(t,n){e.ondata(null,t,n)}):(this.i=new AsyncInflate(function(t,n,r){e.ondata(t,n,r)}),this.terminate=this.i.terminate)}return t.prototype.push=function(t,n){this.i.terminate&&(t=slc(t,0)),this.i.push(t,n)},t.compression=8,t}();exports.AsyncUnzipInflate=AsyncUnzipInflate;var Unzip=function(){function t(t){this.onfile=t,this.k=[],this.o={0:UnzipPassThrough},this.p=et}return t.prototype.push=function(t,n){var e=this;if(this.onfile||err(5),this.p||err(4),this.c>0){var r=Math.min(this.c,t.length),i=t.subarray(0,r);if(this.c-=r,this.d?this.d.push(i,!this.c):this.k[0].push(i),(t=t.subarray(r)).length)return this.push(t,n)}else{var s=0,a=0,o=void 0,f=void 0;this.p.length?t.length?((f=new u8(this.p.length+t.length)).set(this.p),f.set(t,this.p.length)):f=this.p:f=t;for(var l=f.length,u=this.c,h=u&&this.d,c=function(){var t,n=b4(f,a);if(67324752==n){s=1,o=a,p.d=null,p.c=0;var r=b2(f,a+6),i=b2(f,a+8),h=2048&r,c=8&r,v=b2(f,a+26),b=b2(f,a+28);if(l>a+30+v+b){var d=[];p.k.unshift(d),s=2;var y,g=b4(f,a+18),m=b4(f,a+22),z=strFromU8(f.subarray(a+30,a+=30+v),!h);4294967295==g?(t=c?[-2]:z64e(f,a),g=t[0],m=t[1]):c&&(g=-1),a+=b,p.c=g;var w={name:z,compression:i,start:function(){if(w.ondata||err(5),g){var t=e.o[i];t||w.ondata(err(14,"unknown compression type "+i,1),null,!1),(y=g<0?new t(z):new t(z,g,m)).ondata=function(t,n,e){w.ondata(t,n,e)};for(var n=0,r=d;n<r.length;n++){var s=r[n];y.push(s,!1)}e.k[0]==d&&e.c?e.d=y:y.push(et,!0)}else w.ondata(null,et,!0)},terminate:function(){y&&y.terminate&&y.terminate()}};g>=0&&(w.size=g,w.originalSize=m),p.onfile(w)}return"break"}if(u){if(134695760==n)return o=a+=12+(-2==u&&8),s=3,p.c=0,"break";if(33639248==n)return o=a-=4,s=3,p.c=0,"break"}},p=this;a<l-4;++a){if("break"===c())break}if(this.p=et,u<0){var v=s?f.subarray(0,o-12-(-2==u&&8)-(134695760==b4(f,o-16)&&4)):f.subarray(0,a);h?h.push(v,!!s):this.k[+(2==s)].push(v)}if(2&s)return this.push(f.subarray(a),n);this.p=f.subarray(a)}n&&(this.c&&err(13),this.p=null)},t.prototype.register=function(t){this.o[t.compression]=t},t}();exports.Unzip=Unzip;var mt="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(t){t()};function unzip(t,n,e){e||(e=n,n={}),"function"!=typeof e&&err(7);var r=[],i=function(){for(var t=0;t<r.length;++t)r[t]()},s={},a=function(t,n){mt(function(){e(t,n)})};mt(function(){a=e});for(var o=t.length-22;101010256!=b4(t,o);--o)if(!o||t.length-o>65558)return a(err(13,0,1),null),i;var f=b2(t,o+8);if(f){var l=f,u=b4(t,o+16),h=4294967295==u||65535==l;if(h){var c=b4(t,o-12);(h=101075792==b4(t,c))&&(l=f=b4(t,c+32),u=b4(t,c+48))}for(var p=n&&n.filter,v=function(n){var e=zh(t,u,h),o=e[0],l=e[1],c=e[2],v=e[3],b=e[4],d=e[5],y=slzh(t,d);u=b;var g=function(t,n){t?(i(),a(t,null)):(n&&(s[v]=n),--f||a(null,s))};if(!p||p({name:v,size:l,originalSize:c,compression:o}))if(o)if(8==o){var m=t.subarray(y,y+l);if(l<32e4)try{g(null,inflateSync(m,{out:new u8(c)}))}catch(t){g(t,null)}else r.push(inflate(m,{size:c},g))}else g(err(14,"unknown compression type "+o,1),null);else g(null,slc(t,y,y+l));else g(null,null)},b=0;b<l;++b)v()}else a(null,{});return i}function unzipSync(t,n){for(var e={},r=t.length-22;101010256!=b4(t,r);--r)(!r||t.length-r>65558)&&err(13);var i=b2(t,r+8);if(!i)return{};var s=b4(t,r+16),a=4294967295==s||65535==i;if(a){var o=b4(t,r-12);(a=101075792==b4(t,o))&&(i=b4(t,o+32),s=b4(t,o+48))}for(var f=n&&n.filter,l=0;l<i;++l){var u=zh(t,s,a),h=u[0],c=u[1],p=u[2],v=u[3],b=u[4],d=u[5],y=slzh(t,d);s=b,f&&!f({name:v,size:c,originalSize:p,compression:h})||(h?8==h?e[v]=inflateSync(t.subarray(y,y+c),{out:new u8(p)}):err(14,"unknown compression type "+h):e[v]=slc(t,y,y+c))}return e}exports.unzip=unzip,exports.unzipSync=unzipSync;

},{"./node-worker.cjs":4}],4:[function(require,module,exports){
"use strict";var ch2={};exports.default=function(e,r,t,s,a){var n=new Worker(ch2[r]||(ch2[r]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return n.onmessage=function(e){var r=e.data,t=r.$e$;if(t){var s=new Error(t[0]);s.code=t[1],s.stack=t[2],a(s,null)}else a(null,r)},n.postMessage(t,s),n};

},{}],5:[function(require,module,exports){
"use strict";var ViterbiBuilder=require("./viterbi/ViterbiBuilder"),ViterbiSearcher=require("./viterbi/ViterbiSearcher"),IpadicFormatter=require("./util/IpadicFormatter"),PUNCTUATION=/、|。/;function Tokenizer(t){this.token_info_dictionary=t.token_info_dictionary,this.unknown_dictionary=t.unknown_dictionary,this.viterbi_builder=new ViterbiBuilder(t),this.viterbi_searcher=new ViterbiSearcher(t.connection_costs),this.formatter=new IpadicFormatter}Tokenizer.splitByPunctuation=function(t){for(var e=[],r=t;""!==r;){var i=r.search(PUNCTUATION);if(i<0){e.push(r);break}e.push(r.substring(0,i+1)),r=r.substring(i+1)}return e},Tokenizer.prototype.tokenize=function(t){for(var e=Tokenizer.splitByPunctuation(t),r=[],i=0;i<e.length;i++){var n=e[i];this.tokenizeForSentence(n,r)}return r},Tokenizer.prototype.tokenizeForSentence=function(t,e){null==e&&(e=[]);var r=this.getLattice(t),i=this.viterbi_searcher.search(r),n=0;e.length>0&&(n=e[e.length-1].word_position);for(var o=0;o<i.length;o++){var a,s,u,c=i[o];"KNOWN"===c.type?(s=null==(u=this.token_info_dictionary.getFeatures(c.name))?[]:u.split(","),a=this.formatter.formatEntry(c.name,n+c.start_pos,c.type,s)):"UNKNOWN"===c.type?(s=null==(u=this.unknown_dictionary.getFeatures(c.name))?[]:u.split(","),a=this.formatter.formatUnknownEntry(c.name,n+c.start_pos,c.type,s,c.surface_form)):a=this.formatter.formatEntry(c.name,n+c.start_pos,c.type,[]),e.push(a)}return e},Tokenizer.prototype.getLattice=function(t){return this.viterbi_builder.build(t)},module.exports=Tokenizer;

},{"./util/IpadicFormatter":21,"./viterbi/ViterbiBuilder":23,"./viterbi/ViterbiSearcher":26}],6:[function(require,module,exports){
"use strict";var Tokenizer=require("./Tokenizer"),DictionaryLoader=require("./loader/NodeDictionaryLoader");function TokenizerBuilder(i){null==i.dicPath?this.dic_path="dict/":this.dic_path=i.dicPath}TokenizerBuilder.prototype.build=function(i){new DictionaryLoader(this.dic_path).load(function(e,r){i(e,new Tokenizer(r))})},module.exports=TokenizerBuilder;

},{"./Tokenizer":5,"./loader/NodeDictionaryLoader":18}],7:[function(require,module,exports){
"use strict";function CharacterClass(s,a,i,t,e){this.class_id=s,this.class_name=a,this.is_always_invoke=i,this.is_grouping=t,this.max_length=e}module.exports=CharacterClass;

},{}],8:[function(require,module,exports){
"use strict";var InvokeDefinitionMap=require("./InvokeDefinitionMap"),CharacterClass=require("./CharacterClass"),SurrogateAwareString=require("../util/SurrogateAwareString"),DEFAULT_CATEGORY="DEFAULT";function CharacterDefinition(){this.character_category_map=new Uint8Array(65536),this.compatible_category_map=new Uint32Array(65536),this.invoke_definition_map=null}CharacterDefinition.load=function(r,e,a){var i=new CharacterDefinition;return i.character_category_map=r,i.compatible_category_map=e,i.invoke_definition_map=InvokeDefinitionMap.load(a),i},CharacterDefinition.parseCharCategory=function(r,e){var a=e[1],i=parseInt(e[2]),t=parseInt(e[3]),n=parseInt(e[4]);return!isFinite(i)||0!==i&&1!==i?(console.log("char.def parse error. INVOKE is 0 or 1 in:"+i),null):!isFinite(t)||0!==t&&1!==t?(console.log("char.def parse error. GROUP is 0 or 1 in:"+t),null):!isFinite(n)||n<0?(console.log("char.def parse error. LENGTH is 1 to n:"+n),null):new CharacterClass(r,a,1===i,1===t,n)},CharacterDefinition.parseCategoryMapping=function(r){var e=parseInt(r[1]),a=r[2],i=3<r.length?r.slice(3):[];return(!isFinite(e)||e<0||e>65535)&&console.log("char.def parse error. CODE is invalid:"+e),{start:e,default:a,compatible:i}},CharacterDefinition.parseRangeCategoryMapping=function(r){var e=parseInt(r[1]),a=parseInt(r[2]),i=r[3],t=4<r.length?r.slice(4):[];return(!isFinite(e)||e<0||e>65535)&&console.log("char.def parse error. CODE is invalid:"+e),(!isFinite(a)||a<0||a>65535)&&console.log("char.def parse error. CODE is invalid:"+a),{start:e,end:a,default:i,compatible:t}},CharacterDefinition.prototype.initCategoryMappings=function(r){var e;if(null!=r)for(var a=0;a<r.length;a++){var i=r[a],t=i.end||i.start;for(e=i.start;e<=t;e++){this.character_category_map[e]=this.invoke_definition_map.lookup(i.default);for(var n=0;n<i.compatible.length;n++){var o=this.compatible_category_map[e],c=i.compatible[n];if(null!=c){var l=this.invoke_definition_map.lookup(c);if(null!=l)o|=1<<l,this.compatible_category_map[e]=o}}}}var s=this.invoke_definition_map.lookup(DEFAULT_CATEGORY);if(null!=s)for(e=0;e<this.character_category_map.length;e++)0===this.character_category_map[e]&&(this.character_category_map[e]=1<<s)},CharacterDefinition.prototype.lookupCompatibleCategory=function(r){var e,a=[],i=r.charCodeAt(0);if(i<this.compatible_category_map.length&&(e=this.compatible_category_map[i]),null==e||0===e)return a;for(var t=0;t<32;t++)if(e<<31-t>>>31==1){var n=this.invoke_definition_map.getCharacterClass(t);if(null==n)continue;a.push(n)}return a},CharacterDefinition.prototype.lookup=function(r){var e,a=r.charCodeAt(0);return SurrogateAwareString.isSurrogatePair(r)?e=this.invoke_definition_map.lookup(DEFAULT_CATEGORY):a<this.character_category_map.length&&(e=this.character_category_map[a]),null==e&&(e=this.invoke_definition_map.lookup(DEFAULT_CATEGORY)),this.invoke_definition_map.getCharacterClass(e)},module.exports=CharacterDefinition;

},{"../util/SurrogateAwareString":22,"./CharacterClass":7,"./InvokeDefinitionMap":11}],9:[function(require,module,exports){
"use strict";function ConnectionCosts(o,t){this.forward_dimension=o,this.backward_dimension=t,this.buffer=new Int16Array(o*t+2),this.buffer[0]=o,this.buffer[1]=t}ConnectionCosts.prototype.put=function(o,t,n){var i=o*this.backward_dimension+t+2;if(this.buffer.length<i+1)throw"ConnectionCosts buffer overflow";this.buffer[i]=n},ConnectionCosts.prototype.get=function(o,t){var n=o*this.backward_dimension+t+2;if(this.buffer.length<n+1)throw"ConnectionCosts buffer overflow";return this.buffer[n]},ConnectionCosts.prototype.loadConnectionCosts=function(o){this.forward_dimension=o[0],this.backward_dimension=o[1],this.buffer=o},module.exports=ConnectionCosts;

},{}],10:[function(require,module,exports){
"use strict";var doublearray=require("doublearray"),TokenInfoDictionary=require("./TokenInfoDictionary"),ConnectionCosts=require("./ConnectionCosts"),UnknownDictionary=require("./UnknownDictionary");function DynamicDictionaries(n,i,o,t){this.trie=null!=n?n:doublearray.builder(0).build([{k:"",v:1}]),this.token_info_dictionary=null!=i?i:new TokenInfoDictionary,this.connection_costs=null!=o?o:new ConnectionCosts(0,0),this.unknown_dictionary=null!=t?t:new UnknownDictionary}DynamicDictionaries.prototype.loadTrie=function(n,i){return this.trie=doublearray.load(n,i),this},DynamicDictionaries.prototype.loadTokenInfoDictionaries=function(n,i,o){return this.token_info_dictionary.loadDictionary(n),this.token_info_dictionary.loadPosVector(i),this.token_info_dictionary.loadTargetMap(o),this},DynamicDictionaries.prototype.loadConnectionCosts=function(n){return this.connection_costs.loadConnectionCosts(n),this},DynamicDictionaries.prototype.loadUnknownDictionaries=function(n,i,o,t,r,e){return this.unknown_dictionary.loadUnknownDictionaries(n,i,o,t,r,e),this},module.exports=DynamicDictionaries;

},{"./ConnectionCosts":9,"./TokenInfoDictionary":12,"./UnknownDictionary":13,"doublearray":2}],11:[function(require,module,exports){
"use strict";var ByteBuffer=require("../util/ByteBuffer"),CharacterClass=require("./CharacterClass");function InvokeDefinitionMap(){this.map=[],this.lookup_table={}}InvokeDefinitionMap.load=function(t){for(var e=new InvokeDefinitionMap,n=[],i=new ByteBuffer(t);i.position+1<i.size();){var o=n.length,r=i.get(),a=i.get(),u=i.getInt(),p=i.getString();n.push(new CharacterClass(o,p,r,a,u))}return e.init(n),e},InvokeDefinitionMap.prototype.init=function(t){if(null!=t)for(var e=0;e<t.length;e++){var n=t[e];this.map[e]=n,this.lookup_table[n.class_name]=e}},InvokeDefinitionMap.prototype.getCharacterClass=function(t){return this.map[t]},InvokeDefinitionMap.prototype.lookup=function(t){var e=this.lookup_table[t];return null==e?null:e},InvokeDefinitionMap.prototype.toBuffer=function(){for(var t=new ByteBuffer,e=0;e<this.map.length;e++){var n=this.map[e];t.put(n.is_always_invoke),t.put(n.is_grouping),t.putInt(n.max_length),t.putString(n.class_name)}return t.shrink(),t.buffer},module.exports=InvokeDefinitionMap;

},{"../util/ByteBuffer":20,"./CharacterClass":7}],12:[function(require,module,exports){
"use strict";var ByteBuffer=require("../util/ByteBuffer");function TokenInfoDictionary(){this.dictionary=new ByteBuffer(10485760),this.target_map={},this.pos_buffer=new ByteBuffer(10485760)}TokenInfoDictionary.prototype.buildDictionary=function(t){for(var i={},r=0;r<t.length;r++){var n=t[r];if(!(n.length<4)){var o=n[0],e=n[1],a=n[2],f=n[3],s=n.slice(4).join(",");isFinite(e)&&isFinite(a)&&isFinite(f)||console.log(n),i[this.put(e,a,f,o,s)]=o}}return this.dictionary.shrink(),this.pos_buffer.shrink(),i},TokenInfoDictionary.prototype.put=function(t,i,r,n,o){var e=this.dictionary.position,a=this.pos_buffer.position;return this.dictionary.putShort(t),this.dictionary.putShort(i),this.dictionary.putShort(r),this.dictionary.putInt(a),this.pos_buffer.putString(n+","+o),e},TokenInfoDictionary.prototype.addMapping=function(t,i){var r=this.target_map[t];null==r&&(r=[]),r.push(i),this.target_map[t]=r},TokenInfoDictionary.prototype.targetMapToBuffer=function(){var t=new ByteBuffer,i=Object.keys(this.target_map).length;for(var r in t.putInt(i),this.target_map){var n=this.target_map[r],o=n.length;t.putInt(parseInt(r)),t.putInt(o);for(var e=0;e<n.length;e++)t.putInt(n[e])}return t.shrink()},TokenInfoDictionary.prototype.loadDictionary=function(t){return this.dictionary=new ByteBuffer(t),this},TokenInfoDictionary.prototype.loadPosVector=function(t){return this.pos_buffer=new ByteBuffer(t),this},TokenInfoDictionary.prototype.loadTargetMap=function(t){var i=new ByteBuffer(t);for(i.position=0,this.target_map={},i.readInt();!(i.buffer.length<i.position+1);)for(var r=i.readInt(),n=i.readInt(),o=0;o<n;o++){var e=i.readInt();this.addMapping(r,e)}return this},TokenInfoDictionary.prototype.getFeatures=function(t){var i=parseInt(t);if(isNaN(i))return"";var r=this.dictionary.getInt(i+6);return this.pos_buffer.getString(r)},module.exports=TokenInfoDictionary;

},{"../util/ByteBuffer":20}],13:[function(require,module,exports){
"use strict";var TokenInfoDictionary=require("./TokenInfoDictionary"),CharacterDefinition=require("./CharacterDefinition"),ByteBuffer=require("../util/ByteBuffer");function UnknownDictionary(){this.dictionary=new ByteBuffer(10485760),this.target_map={},this.pos_buffer=new ByteBuffer(10485760),this.character_definition=null}UnknownDictionary.prototype=Object.create(TokenInfoDictionary.prototype),UnknownDictionary.prototype.characterDefinition=function(t){return this.character_definition=t,this},UnknownDictionary.prototype.lookup=function(t){return this.character_definition.lookup(t)},UnknownDictionary.prototype.lookupCompatibleCategory=function(t){return this.character_definition.lookupCompatibleCategory(t)},UnknownDictionary.prototype.loadUnknownDictionaries=function(t,i,n,o,r,e){this.loadDictionary(t),this.loadPosVector(i),this.loadTargetMap(n),this.character_definition=CharacterDefinition.load(o,r,e)},module.exports=UnknownDictionary;

},{"../util/ByteBuffer":20,"./CharacterDefinition":8,"./TokenInfoDictionary":12}],14:[function(require,module,exports){
"use strict";var CharacterDefinition=require("../CharacterDefinition"),InvokeDefinitionMap=require("../InvokeDefinitionMap"),CATEGORY_DEF_PATTERN=/^(\w+)\s+(\d)\s+(\d)\s+(\d)/,CATEGORY_MAPPING_PATTERN=/^(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/,RANGE_CATEGORY_MAPPING_PATTERN=/^(0x[0-9A-F]{4})\.\.(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/;function CharacterDefinitionBuilder(){this.char_def=new CharacterDefinition,this.char_def.invoke_definition_map=new InvokeDefinitionMap,this.character_category_definition=[],this.category_mapping=[]}CharacterDefinitionBuilder.prototype.putLine=function(i){var e=CATEGORY_DEF_PATTERN.exec(i);if(null==e){var t=CATEGORY_MAPPING_PATTERN.exec(i);if(null!=t){var r=CharacterDefinition.parseCategoryMapping(t);this.category_mapping.push(r)}var a=RANGE_CATEGORY_MAPPING_PATTERN.exec(i);if(null!=a){var n=CharacterDefinition.parseRangeCategoryMapping(a);this.category_mapping.push(n)}}else{var o=this.character_category_definition.length,c=CharacterDefinition.parseCharCategory(o,e);if(null==c)return;this.character_category_definition.push(c)}},CharacterDefinitionBuilder.prototype.build=function(){return this.char_def.invoke_definition_map.init(this.character_category_definition),this.char_def.initCategoryMappings(this.category_mapping),this.char_def},module.exports=CharacterDefinitionBuilder;

},{"../CharacterDefinition":8,"../InvokeDefinitionMap":11}],15:[function(require,module,exports){
"use strict";var ConnectionCosts=require("../ConnectionCosts");function ConnectionCostsBuilder(){this.lines=0,this.connection_cost=null}ConnectionCostsBuilder.prototype.putLine=function(t){if(0===this.lines){var n=t.split(" "),i=n[0],o=n[1];if(i<0||o<0)throw"Parse error of matrix.def";return this.connection_cost=new ConnectionCosts(i,o),this.lines++,this}var s=t.split(" ");if(3!==s.length)return this;var e=parseInt(s[0]),r=parseInt(s[1]),c=parseInt(s[2]);if(e<0||r<0||!isFinite(e)||!isFinite(r)||this.connection_cost.forward_dimension<=e||this.connection_cost.backward_dimension<=r)throw"Parse error of matrix.def";return this.connection_cost.put(e,r,c),this.lines++,this},ConnectionCostsBuilder.prototype.build=function(){return this.connection_cost},module.exports=ConnectionCostsBuilder;

},{"../ConnectionCosts":9}],16:[function(require,module,exports){
"use strict";var doublearray=require("doublearray"),DynamicDictionaries=require("../DynamicDictionaries"),TokenInfoDictionary=require("../TokenInfoDictionary"),ConnectionCostsBuilder=require("./ConnectionCostsBuilder"),CharacterDefinitionBuilder=require("./CharacterDefinitionBuilder"),UnknownDictionary=require("../UnknownDictionary");function DictionaryBuilder(){this.tid_entries=[],this.unk_entries=[],this.cc_builder=new ConnectionCostsBuilder,this.cd_builder=new CharacterDefinitionBuilder}DictionaryBuilder.prototype.addTokenInfoDictionary=function(i){var n=i.split(",");return this.tid_entries.push(n),this},DictionaryBuilder.prototype.putCostMatrixLine=function(i){return this.cc_builder.putLine(i),this},DictionaryBuilder.prototype.putCharDefLine=function(i){return this.cd_builder.putLine(i),this},DictionaryBuilder.prototype.putUnkDefLine=function(i){return this.unk_entries.push(i.split(",")),this},DictionaryBuilder.prototype.build=function(){var i=this.buildTokenInfoDictionary(),n=this.buildUnknownDictionary();return new DynamicDictionaries(i.trie,i.token_info_dictionary,this.cc_builder.build(),n)},DictionaryBuilder.prototype.buildTokenInfoDictionary=function(){var i=new TokenInfoDictionary,n=i.buildDictionary(this.tid_entries),r=this.buildDoubleArray();for(var t in n){var e=n[t],o=r.lookup(e);i.addMapping(o,t)}return{trie:r,token_info_dictionary:i}},DictionaryBuilder.prototype.buildUnknownDictionary=function(){var i=new UnknownDictionary,n=i.buildDictionary(this.unk_entries),r=this.cd_builder.build();for(var t in i.characterDefinition(r),n){var e=n[t],o=r.invoke_definition_map.lookup(e);i.addMapping(o,t)}return i},DictionaryBuilder.prototype.buildDoubleArray=function(){var i=0,n=this.tid_entries.map(function(n){return{k:n[0],v:i++}});return doublearray.builder(1048576).build(n)},module.exports=DictionaryBuilder;

},{"../DynamicDictionaries":10,"../TokenInfoDictionary":12,"../UnknownDictionary":13,"./CharacterDefinitionBuilder":14,"./ConnectionCostsBuilder":15,"doublearray":2}],17:[function(require,module,exports){
"use strict";var TokenizerBuilder=require("./TokenizerBuilder"),DictionaryBuilder=require("./dict/builder/DictionaryBuilder"),kuromoji={builder:function(r){return new TokenizerBuilder(r)},dictionaryBuilder:function(){return new DictionaryBuilder}};module.exports=kuromoji;

},{"./TokenizerBuilder":6,"./dict/builder/DictionaryBuilder":16}],18:[function(require,module,exports){
"use strict";var fflate=require("fflate"),DictionaryLoader=require("./DictionaryLoader");function BrowserDictionaryLoader(r){DictionaryLoader.apply(this,[r])}BrowserDictionaryLoader.prototype=Object.create(DictionaryLoader.prototype),BrowserDictionaryLoader.prototype.loadArrayBuffer=function(r,t){fetch(r).then(function(r){r.ok||t(r.statusText,null),r.arrayBuffer().then(function(r){var e=fflate.gunzipSync(new Uint8Array(r));t(null,e)})}).catch(function(r){t(r,null)})},module.exports=BrowserDictionaryLoader;

},{"./DictionaryLoader":19,"fflate":3}],19:[function(require,module,exports){
"use strict";var async=require("async"),DynamicDictionaries=require("../dict/DynamicDictionaries");function DictionaryLoader(n){this.dic=new DynamicDictionaries,this.dic_path=n}DictionaryLoader.prototype.loadArrayBuffer=function(n,r){throw new Error("DictionaryLoader#loadArrayBuffer should be overwrite")},DictionaryLoader.prototype.load=function(n){var r=this.dic,i=this.dic_path,t=this.loadArrayBuffer,a=function(n){var r=new RegExp("/{1,}","g");return[i,n].join("/").replace(r,"/")};async.parallel([function(n){async.map(["base.dat.gz","check.dat.gz"],function(n,r){t(a(n),function(n,i){if(n)return r(n);r(null,i)})},function(i,t){if(i)return n(i);var a=new Int32Array(t[0]),o=new Int32Array(t[1]);r.loadTrie(a,o),n(null)})},function(n){async.map(["tid.dat.gz","tid_pos.dat.gz","tid_map.dat.gz"],function(n,r){t(a(n),function(n,i){if(n)return r(n);r(null,i)})},function(i,t){if(i)return n(i);var a=new Uint8Array(t[0]),o=new Uint8Array(t[1]),e=new Uint8Array(t[2]);r.loadTokenInfoDictionaries(a,o,e),n(null)})},function(n){t(a("cc.dat.gz"),function(i,t){if(i)return n(i);var a=new Int16Array(t);r.loadConnectionCosts(a),n(null)})},function(n){async.map(["unk.dat.gz","unk_pos.dat.gz","unk_map.dat.gz","unk_char.dat.gz","unk_compat.dat.gz","unk_invoke.dat.gz"],function(n,r){t(a(n),function(n,i){if(n)return r(n);r(null,i)})},function(i,t){if(i)return n(i);var a=new Uint8Array(t[0]),o=new Uint8Array(t[1]),e=new Uint8Array(t[2]),c=new Uint8Array(t[3]),u=new Uint32Array(t[4]),d=new Uint8Array(t[5]);r.loadUnknownDictionaries(a,o,e,c,u,d),n(null)})}],function(i){n(i,r)})},module.exports=DictionaryLoader;

},{"../dict/DynamicDictionaries":10,"async":1}],20:[function(require,module,exports){
"use strict";var stringToUtf8Bytes=function(t){for(var r=new Uint8Array(4*t.length),e=0,i=0;e<t.length;){var f,o=t.charCodeAt(e++);if(o>=55296&&o<=56319){var n=o,u=t.charCodeAt(e++);if(!(u>=56320&&u<=57343))return null;f=1024*(n-55296)+65536+(u-56320)}else f=o;f<128?r[i++]=f:f<2048?(r[i++]=f>>>6|192,r[i++]=63&f|128):f<65536?(r[i++]=f>>>12|224,r[i++]=f>>6&63|128,r[i++]=63&f|128):f<1<<21&&(r[i++]=f>>>18|240,r[i++]=f>>12&63|128,r[i++]=f>>6&63|128,r[i++]=63&f|128)}return r.subarray(0,i)},utf8BytesToString=function(t){for(var r,e,i,f,o="",n=0;n<t.length;)(r=(e=t[n++])<128?e:e>>5==6?(31&e)<<6|63&t[n++]:e>>4==14?(15&e)<<12|(63&t[n++])<<6|63&t[n++]:(7&e)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])<65536?o+=String.fromCharCode(r):(i=55296|(r-=65536)>>10,f=56320|1023&r,o+=String.fromCharCode(i,f));return o};function ByteBuffer(t){var r;if(null==t)r=1048576;else{if("number"!=typeof t){if(t instanceof Uint8Array)return this.buffer=t,void(this.position=0);throw typeof t+" is invalid parameter type for ByteBuffer constructor"}r=t}this.buffer=new Uint8Array(r),this.position=0}ByteBuffer.prototype.size=function(){return this.buffer.length},ByteBuffer.prototype.reallocate=function(){var t=new Uint8Array(2*this.buffer.length);t.set(this.buffer),this.buffer=t},ByteBuffer.prototype.shrink=function(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer},ByteBuffer.prototype.put=function(t){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=t},ByteBuffer.prototype.get=function(t){return null==t&&(t=this.position,this.position+=1),this.buffer.length<t+1?0:this.buffer[t]},ByteBuffer.prototype.putShort=function(t){if(65535<t)throw t+" is over short value";var r=255&t,e=(65280&t)>>8;this.put(r),this.put(e)},ByteBuffer.prototype.getShort=function(t){if(null==t&&(t=this.position,this.position+=2),this.buffer.length<t+2)return 0;var r=this.buffer[t],e=(this.buffer[t+1]<<8)+r;return 32768&e&&(e=-(e-1^65535)),e},ByteBuffer.prototype.putInt=function(t){if(4294967295<t)throw t+" is over integer value";var r=255&t,e=(65280&t)>>8,i=(16711680&t)>>16,f=(4278190080&t)>>24;this.put(r),this.put(e),this.put(i),this.put(f)},ByteBuffer.prototype.getInt=function(t){if(null==t&&(t=this.position,this.position+=4),this.buffer.length<t+4)return 0;var r=this.buffer[t],e=this.buffer[t+1],i=this.buffer[t+2];return(this.buffer[t+3]<<24)+(i<<16)+(e<<8)+r},ByteBuffer.prototype.readInt=function(){var t=this.position;return this.position+=4,this.getInt(t)},ByteBuffer.prototype.putString=function(t){for(var r=stringToUtf8Bytes(t),e=0;e<r.length;e++)this.put(r[e]);this.put(0)},ByteBuffer.prototype.getString=function(t){var r,e=[];for(null==t&&(t=this.position);!(this.buffer.length<t+1)&&0!==(r=this.get(t++));)e.push(r);return this.position=t,utf8BytesToString(e)},module.exports=ByteBuffer;

},{}],21:[function(require,module,exports){
"use strict";function IpadicFormatter(){}IpadicFormatter.prototype.formatEntry=function(o,t,r,a){var e={};return e.word_id=o,e.word_type=r,e.word_position=t,e.surface_form=a[0],e.pos=a[1],e.pos_detail_1=a[2],e.pos_detail_2=a[3],e.pos_detail_3=a[4],e.conjugated_type=a[5],e.conjugated_form=a[6],e.basic_form=a[7],e.reading=a[8],e.pronunciation=a[9],e},IpadicFormatter.prototype.formatUnknownEntry=function(o,t,r,a,e){var _={};return _.word_id=o,_.word_type=r,_.word_position=t,_.surface_form=e,_.pos=a[1],_.pos_detail_1=a[2],_.pos_detail_2=a[3],_.pos_detail_3=a[4],_.conjugated_type=a[5],_.conjugated_form=a[6],_.basic_form=a[7],_},module.exports=IpadicFormatter;

},{}],22:[function(require,module,exports){
"use strict";function SurrogateAwareString(t){this.str=t,this.index_mapping=[];for(var r=0;r<t.length;r++){var i=t.charAt(r);this.index_mapping.push(r),SurrogateAwareString.isSurrogatePair(i)&&r++}this.length=this.index_mapping.length}SurrogateAwareString.prototype.slice=function(t){if(this.index_mapping.length<=t)return"";var r=this.index_mapping[t];return this.str.slice(r)},SurrogateAwareString.prototype.charAt=function(t){if(this.str.length<=t)return"";var r=this.index_mapping[t],i=this.index_mapping[t+1];return null==i?this.str.slice(r):this.str.slice(r,i)},SurrogateAwareString.prototype.charCodeAt=function(t){if(this.index_mapping.length<=t)return NaN;var r,i=this.index_mapping[t],e=this.str.charCodeAt(i);return e>=55296&&e<=56319&&i<this.str.length&&(r=this.str.charCodeAt(i+1))>=56320&&r<=57343?1024*(e-55296)+r-56320+65536:e},SurrogateAwareString.prototype.toString=function(){return this.str},SurrogateAwareString.isSurrogatePair=function(t){var r=t.charCodeAt(0);return r>=55296&&r<=56319},module.exports=SurrogateAwareString;

},{}],23:[function(require,module,exports){
"use strict";var ViterbiNode=require("./ViterbiNode"),ViterbiLattice=require("./ViterbiLattice"),SurrogateAwareString=require("../util/SurrogateAwareString");function ViterbiBuilder(i){this.trie=i.trie,this.token_info_dictionary=i.token_info_dictionary,this.unknown_dictionary=i.unknown_dictionary}ViterbiBuilder.prototype.build=function(i){for(var t,r,n,e,o,a=new ViterbiLattice,c=new SurrogateAwareString(i),d=0;d<c.length;d++){for(var h=c.slice(d),g=this.trie.commonPrefixSearch(h),s=0;s<g.length;s++){r=g[s].v,t=g[s].k;for(var u=this.token_info_dictionary.target_map[r],_=0;_<u.length;_++){var l=parseInt(u[_]);n=this.token_info_dictionary.dictionary.getShort(l),e=this.token_info_dictionary.dictionary.getShort(l+2),o=this.token_info_dictionary.dictionary.getShort(l+4),a.append(new ViterbiNode(l,o,d+1,t.length,"KNOWN",n,e,t))}}var y=new SurrogateAwareString(h),w=new SurrogateAwareString(y.charAt(0)),k=this.unknown_dictionary.lookup(w.toString());if(null==g||0===g.length||1===k.is_always_invoke){if(t=w,1===k.is_grouping&&1<y.length)for(var S=1;S<y.length;S++){var f=y.charAt(S),p=this.unknown_dictionary.lookup(f);if(k.class_name!==p.class_name)break;t+=f}for(var b=this.unknown_dictionary.target_map[k.class_id],v=0;v<b.length;v++){var V=parseInt(b[v]);n=this.unknown_dictionary.dictionary.getShort(V),e=this.unknown_dictionary.dictionary.getShort(V+2),o=this.unknown_dictionary.dictionary.getShort(V+4),a.append(new ViterbiNode(V,o,d+1,t.length,"UNKNOWN",n,e,t.toString()))}}}return a.appendEos(),a},module.exports=ViterbiBuilder;

},{"../util/SurrogateAwareString":22,"./ViterbiLattice":24,"./ViterbiNode":25}],24:[function(require,module,exports){
"use strict";var ViterbiNode=require("./ViterbiNode");function ViterbiLattice(){this.nodes_end_at=[],this.nodes_end_at[0]=[new ViterbiNode(-1,0,0,0,"BOS",0,0,"")],this.eos_pos=1}ViterbiLattice.prototype.append=function(t){var e=t.start_pos+t.length-1;this.eos_pos<e&&(this.eos_pos=e);var i=this.nodes_end_at[e];null==i&&(i=[]),i.push(t),this.nodes_end_at[e]=i},ViterbiLattice.prototype.appendEos=function(){var t=this.nodes_end_at.length;this.eos_pos++,this.nodes_end_at[t]=[new ViterbiNode(-1,0,this.eos_pos,0,"EOS",0,0,"")]},module.exports=ViterbiLattice;

},{"./ViterbiNode":25}],25:[function(require,module,exports){
"use strict";function ViterbiNode(t,s,i,e,h,r,o,u){this.name=t,this.cost=s,this.start_pos=i,this.length=e,this.left_id=r,this.right_id=o,this.prev=null,this.surface_form=u,this.shortest_cost="BOS"===h?0:Number.MAX_VALUE,this.type=h}module.exports=ViterbiNode;

},{}],26:[function(require,module,exports){
"use strict";function ViterbiSearcher(r){this.connection_costs=r}ViterbiSearcher.prototype.search=function(r){return r=this.forward(r),this.backward(r)},ViterbiSearcher.prototype.forward=function(r){var e,t,o;for(e=1;e<=r.eos_pos;e++){var n=r.nodes_end_at[e];if(null!=n)for(t=0;t<n.length;t++){var i,s=n[t],a=Number.MAX_VALUE,c=r.nodes_end_at[s.start_pos-1];if(null!=c){for(o=0;o<c.length;o++){var l,u=c[o];null==s.left_id||null==u.right_id?(console.log("Left or right is null"),l=0):l=this.connection_costs.get(u.right_id,s.left_id);var h=u.shortest_cost+l+s.cost;h<a&&(i=u,a=h)}s.prev=i,s.shortest_cost=a}}}return r},ViterbiSearcher.prototype.backward=function(r){var e=[],t=r.nodes_end_at[r.nodes_end_at.length-1][0].prev;if(null==t)return[];for(;"BOS"!==t.type;){if(e.push(t),null==t.prev)return[];t=t.prev}return e.reverse()},module.exports=ViterbiSearcher;

},{}],27:[function(require,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],28:[function(require,module,exports){
(function (setImmediate,clearImmediate){(function (){
var nextTick=require("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;function Timeout(e,t){this._id=e,this._clearFn=t}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},exports.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=nextImmediateId++,i=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[t]=!0,nextTick(function(){immediateIds[t]&&(i?e.apply(null,i):e.call(null),exports.clearImmediate(t))}),t},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete immediateIds[e]};

}).call(this)}).call(this,require("timers").setImmediate,require("timers").clearImmediate)
},{"process/browser.js":27,"timers":28}],29:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,o,t){return o&&e(r.prototype,o),t&&e(r,t),r}}(),_kuromoji=require("kuromoji"),_kuromoji2=_interopRequireDefault(_kuromoji);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var isNode=!1,isBrowser="undefined"!=typeof window;!isBrowser&&"undefined"!=typeof module&&module.exports&&(isNode=!0);var Analyzer=function(){function e(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).dictPath;_classCallCheck(this,e),this._analyzer=null,this._dictPath=r||(isNode?require.resolve("kuromoji").replace(/src(?!.*src).*/,"dict/"):"node_modules/kuromoji/dict/")}return _createClass(e,[{key:"init",value:function(){var e=this;return new Promise(function(r,o){var t=e;null==e._analyzer?_kuromoji2.default.builder({dicPath:e._dictPath}).build(function(e,i){if(e)return o(e);t._analyzer=i,r()}):o(new Error("This analyzer has already been initialized."))})}},{key:"parse",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise(function(o,t){if(""===r.trim())return o([]);for(var i=e._analyzer.tokenize(r),n=0;n<i.length;n++)i[n].verbose={},i[n].verbose.word_id=i[n].word_id,i[n].verbose.word_type=i[n].word_type,i[n].verbose.word_position=i[n].word_position,delete i[n].word_id,delete i[n].word_type,delete i[n].word_position;o(i)})}}]),e}();exports.default=Analyzer,module.exports=exports.default;

},{"kuromoji":17}]},{},[29])(29)
});
